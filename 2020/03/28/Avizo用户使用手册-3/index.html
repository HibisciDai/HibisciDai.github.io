<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Avizo用户使用手册-3"><meta name="keywords" content="AvizoUsersGuide,用户使用手册"><meta name="author" content="HibisciDai"><meta name="copyright" content="HibisciDai"><title>Avizo用户使用手册-3 | HibisciDai</title><link rel="shortcut icon" href="/img/avatar.png"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '6.1.0'
} </script><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="HibisciDai" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Chapter-3"><span class="toc-number">1.</span> <span class="toc-text">Chapter 3</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E6%95%99%E7%A8%8B%EF%BC%9A%E5%8F%AF%E8%A7%86%E5%8C%96%E5%92%8C%E5%A4%84%E7%90%862D%E5%92%8C3D%E5%9B%BE%E5%83%8F"><span class="toc-number">2.</span> <span class="toc-text">3 教程：可视化和处理2D和3D图像</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%A6%82%E4%BD%95%E5%8A%A0%E8%BD%BD%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">2.1.</span> <span class="toc-text">3.1 如何加载图像数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-Avizo%E6%96%87%E4%BB%B6%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-number">2.1.1.</span> <span class="toc-text">3.1.1 Avizo文件浏览器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">设置文件格式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E4%BB%8E%E5%A4%9A%E4%B8%AA2D%E5%88%87%E7%89%87%E8%AF%BB%E5%8F%963D%E5%9B%BE%E5%83%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">2.1.2.</span> <span class="toc-text">3.1.2 从多个2D切片读取3D图像数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-%E8%AE%BE%E7%BD%AE%E8%BE%B9%E7%95%8C%E6%A1%86"><span class="toc-number">2.1.3.</span> <span class="toc-text">3.1.3 设置边界框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-4-%E5%A0%86%E5%8F%A0%E5%BC%8F%E5%88%87%E7%89%87%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.1.4.</span> <span class="toc-text">3.1.4 堆叠式切片文件格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-5-%E5%A4%84%E7%90%86%E5%A4%A7%E7%A3%81%E7%9B%98%E6%95%B0%E6%8D%AE"><span class="toc-number">2.1.5.</span> <span class="toc-text">3.1.5 处理大磁盘数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-6-%E4%BD%BF%E7%94%A8%E6%A0%B8%E5%BF%83%E5%A4%96%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%EF%BC%88LDA%EF%BC%89"><span class="toc-number">2.1.6.</span> <span class="toc-text">3.1.6 使用核心外数据文件（LDA）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-6-1-%E8%B0%83%E6%95%B4%E5%A4%A7%E5%B0%8F%E9%98%88%E5%80%BC%E4%BB%A5%E5%90%AF%E7%94%A8%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.1.6.1.</span> <span class="toc-text">3.1.6.1 调整大小阈值以启用转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-6-2-%E5%8A%A0%E8%BD%BD%E6%A0%B8%E5%A4%96%E6%95%B0%E6%8D%AE"><span class="toc-number">2.1.6.2.</span> <span class="toc-text">3.1.6.2 加载核外数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-6-3-%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E5%8F%82%E6%95%B0"><span class="toc-number">2.1.6.3.</span> <span class="toc-text">3.1.6.3 原始数据参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-6-4-%E5%86%85%E6%A0%B8%E5%A4%96%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.1.6.4.</span> <span class="toc-text">3.1.6.4 内核外转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-6-5-%E6%98%BE%E7%A4%BAOrtho-Slice-a-Slice-and-a-3D-Volume"><span class="toc-number">2.1.6.5.</span> <span class="toc-text">3.1.6.5  显示Ortho Slice, a Slice, and a 3D Volume</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E5%8F%AF%E8%A7%86%E5%8C%963D%E5%9B%BE%E5%83%8F"><span class="toc-number">2.2.</span> <span class="toc-text">3.2 可视化3D图像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-Orthogonal-Slices%E6%AD%A3%E4%BA%A4%E5%88%87%E7%89%87"><span class="toc-number">2.2.1.</span> <span class="toc-text">3.2.1 Orthogonal Slices正交切片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90"><span class="toc-number">2.2.2.</span> <span class="toc-text">3.2.2 简单数据分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-%E9%87%8D%E9%87%87%E6%A0%B7%E6%95%B0%E6%8D%AE"><span class="toc-number">2.2.3.</span> <span class="toc-text">3.2.3 重采样数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-4-%E6%98%BE%E7%A4%BA%E7%AD%89%E5%80%BC%E9%9D%A2"><span class="toc-number">2.2.4.</span> <span class="toc-text">3.2.4 显示等值面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-5-%E8%A3%81%E5%89%AA%E6%95%B0%E6%8D%AE"><span class="toc-number">2.2.5.</span> <span class="toc-text">3.2.5 裁剪数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-6-%E4%BD%93%E7%A7%AF%E6%B8%B2%E6%9F%93"><span class="toc-number">2.2.6.</span> <span class="toc-text">3.2.6 体积渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-6-1-%E4%BD%BF%E7%94%A8%E4%BD%93%E7%A7%AF%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%9D%97"><span class="toc-number">2.2.6.1.</span> <span class="toc-text">3.2.6.1 使用体积渲染模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-6-2-%E4%BD%BF%E7%94%A8Volren%E6%A8%A1%E5%9D%97"><span class="toc-number">2.2.6.2.</span> <span class="toc-text">3.2.6.2 使用Volren模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-6-3-Volren%EF%BC%8CVoltex%E5%92%8CVolume-Rendering%E6%A8%A1%E5%9D%97%E4%B9%8B%E9%97%B4%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">2.2.6.3.</span> <span class="toc-text">3.2.6.3 Volren，Voltex和Volume Rendering模块之间的比较</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E5%B0%863D%E5%92%8C2D%E8%A7%86%E5%9B%BE%E4%B8%8E%E6%AD%A3%E8%A7%86%E5%9B%BE%EF%BC%88Avizo%EF%BC%89%E7%BB%84%E5%90%88"><span class="toc-number">2.3.</span> <span class="toc-text">3.3 将3D和2D视图与正视图（Avizo）组合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">2.3.1.</span> <span class="toc-text">3.3.1 快速入门</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-%E4%BD%BF%E7%94%A8%E6%AD%A3%E4%BA%A4%E8%A7%86%E5%9B%BEOrtho-Views%E7%AE%A1%E7%90%86%E7%BB%84%E5%90%88%E7%9A%843D%E5%92%8C2D%E8%A7%86%E5%9B%BE"><span class="toc-number">2.3.2.</span> <span class="toc-text">3.3.2 使用正交视图Ortho Views管理组合的3D和2D视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E5%BC%BA%E5%BA%A6%E8%8C%83%E5%9B%B4%E5%88%86%E5%8C%BA"><span class="toc-number">2.4.</span> <span class="toc-text">3.4 强度范围分区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-3D%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2"><span class="toc-number">2.5.</span> <span class="toc-text">3.5 3D图像分割</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-1-%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2"><span class="toc-number">2.5.1.</span> <span class="toc-text">3.5.1 交互式图像分割</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-2-%E6%95%B0%E9%87%8F%E7%BB%9F%E8%AE%A1%E7%BB%9F%E8%AE%A1"><span class="toc-number">2.5.2.</span> <span class="toc-text">3.5.2 数量统计统计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-3-%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2"><span class="toc-number">2.5.3.</span> <span class="toc-text">3.5.3 阈值分割</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-4-%E7%BB%86%E5%8C%96%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2%E7%BB%93%E6%9E%9C"><span class="toc-number">2.5.4.</span> <span class="toc-text">3.5.4 细化阈值分割结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-5-%E6%9C%89%E5%85%B3%E7%BB%86%E5%88%86%E7%9A%84%E6%9B%B4%E5%A4%9A%E6%8F%90%E7%A4%BA"><span class="toc-number">2.5.5.</span> <span class="toc-text">3.5.5 有关细分的更多提示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E7%94%A8%E4%BA%8E%E5%85%89%E5%AD%A6%E6%98%BE%E5%BE%AE%E9%95%9C%E7%9A%84%E5%8F%8D%E5%8D%B7%E7%A7%AF"><span class="toc-number">2.6.</span> <span class="toc-text">3.6 用于光学显微镜的反卷积</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-1-%E5%85%B3%E4%BA%8E%E5%9B%BE%E5%83%8F%E5%8F%8D%E5%8D%B7%E7%A7%AF%E7%9A%84%E4%B8%80%E8%88%AC%E8%AF%B4%E6%98%8E"><span class="toc-number">2.6.1.</span> <span class="toc-text">3.6.1 关于图像反卷积的一般说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-2-%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E5%92%8C%E9%87%87%E6%A0%B7%E7%8E%87"><span class="toc-number">2.6.2.</span> <span class="toc-text">3.6.2 数据采集和采样率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-3-%E6%A0%87%E5%87%86%E5%8F%8D%E5%8D%B7%E7%A7%AF%E6%95%99%E7%A8%8BStandard-Deconvolution"><span class="toc-number">2.6.3.</span> <span class="toc-text">3.6.3 标准反卷积教程Standard Deconvolution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-4-%E7%9B%B2%E5%8F%8D%E5%8D%B7%E7%A7%AF%E6%95%99%E7%A8%8BBlind-Deconvolution"><span class="toc-number">2.6.4.</span> <span class="toc-text">3.6.4 盲反卷积教程Blind Deconvolution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-5-%E7%8F%A0%E6%8F%90%E5%8F%96%E6%95%99%E7%A8%8BBead-Extraction"><span class="toc-number">2.6.5.</span> <span class="toc-text">3.6.5 珠提取教程Bead Extraction</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-6-%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%92%8C%E5%A4%9A%E5%A4%84%E7%90%86"><span class="toc-number">2.6.6.</span> <span class="toc-text">3.6.6 性能问题和多处理</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/Avatar.png"></div><div class="author-info__name text-center">HibisciDai</div><div class="author-info__description text-center">HibisciDai'Blog</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">213</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">73</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">29</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://github.com/HibisciDai/hexo-theme-melody">HexoTheme-github</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://molunerfinn.com/">molunerfinn</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/banner2.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">HibisciDai</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/about">关于我</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/gallery">相册</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">Avizo用户使用手册-3</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-03-28</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/AvizoUsersGuide/">AvizoUsersGuide</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">22.4k</span><span class="post-meta__separator">|</span><span>阅读时长: 70 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3.png" class="" title="Avizo用户使用手册-3">
<p>Avizo用户使用手册-3</p>
<span id="more"></span>
<p>[TOC]</p>
<h1 id="Chapter-3"><a href="#Chapter-3" class="headerlink" title="Chapter 3"></a>Chapter 3</h1><h1 id="3-教程：可视化和处理2D和3D图像"><a href="#3-教程：可视化和处理2D和3D图像" class="headerlink" title="3 教程：可视化和处理2D和3D图像"></a>3 教程：可视化和处理2D和3D图像</h1><p>Avizo为导入，可视化和处理2D和3D图像提供了广泛的支持。<br>对于相关功能概述，请参阅第1.2节。本章中的教程介绍<br>以下主题：</p>
<ul>
<li>读取图像-如何读取图像</li>
<li>可视化3D图像-切片，等值面，体绘制</li>
<li>将3D和2D视图与正视图结合使用-如何有效地可视化和检查3D图片</li>
<li>强度范围分割-3D图像数据分割</li>
<li>图像分割-3D图像数据分割</li>
<li>用于光学显微镜的反卷积-强大的算法，可提高显微技术的质量视觉图像</li>
<li>图像和堆栈处理-为图像数据创建图像处理工作流</li>
</ul>
<h2 id="3-1-如何加载图像数据"><a href="#3-1-如何加载图像数据" class="headerlink" title="3.1 如何加载图像数据"></a>3.1 如何加载图像数据</h2><p>加载图像数据是Avizo中最基本的操作之一。除了2D图像外<br>包含3D图像的标准化文件格式并不多。本教程通过以下方式指导您如何将各种3D图像加载到Avizo中的示例。本教程特别涵盖以下主题：</p>
<ul>
<li>使用<code>File/Open Data...</code>浏览器并设置文件格式。</li>
<li>从多个2D切片读取3D图像数据。</li>
<li>设置3D图像的边界框或体素大小。</li>
<li>堆叠切片文件格式。</li>
<li>处理大磁盘数据。</li>
</ul>
<h3 id="3-1-1-Avizo文件浏览器"><a href="#3-1-1-Avizo文件浏览器" class="headerlink" title="3.1.1 Avizo文件浏览器"></a>3.1.1 Avizo文件浏览器</h3><p>图像数据通过<code>File/Open Data...</code>对话框加载到Avizo中。Avizo支持的所有文件格式可以通过数据标题或文件名后缀自动识别。<br>接下来的只是在以下情况下值得关注：</p>
<ul>
<li>自动文件格式检测失败。</li>
<li>3D图像数据存储在多个2D文件中。</li>
<li>数据大于可用的主存储器。</li>
</ul>
<h4 id="设置文件格式"><a href="#设置文件格式" class="headerlink" title="设置文件格式"></a>设置文件格式</h4><p>在大多数情况下，文件格式是自动确定的，方法是检查文件标题或通过将文件名后缀与已知后缀列表进行比较。在加载对话框中，文件格式为在详细视图的单独列中显示。</p>
<p>例：</p>
<ul>
<li>第一行中包含字符串Avizo的文件被视为Avizo文件。</li>
<li>后缀为<code>.stl</code>的文件被视为STL文件。</li>
</ul>
<p>如果自动文件格式检测失败，例如，因为使用了一些非标准后缀，则格式可以使用<code>File/Open Data As...</code>对话框手动设置。</p>
<h3 id="3-1-2-从多个2D切片读取3D图像数据"><a href="#3-1-2-从多个2D切片读取3D图像数据" class="headerlink" title="3.1.2 从多个2D切片读取3D图像数据"></a>3.1.2 从多个2D切片读取3D图像数据</h3><p>存储3D图像数据的常用方法是为每个切片编写单独的2D图像文件。2D图像可以TIFF，BMP，JPEG或任何其他受支持的图像文件格式写入。<br>为了加载对于Avizo中的此类数据，必须在文件浏览器中同时选择所有2D切片。可以做到通过单击第一个文件并按住Shift并单击最后一个文件。</p>
<ul>
<li>打开<code>File/Open Data...</code>对话框。</li>
<li>浏览到<code>$AVIZO ROOT/data/teddybear/</code>目录。</li>
<li>选择第一个文件<code>teddybear000.jpg</code>。</li>
<li>按住<code>Shift</code>并单击最后一个文件<code>teddybear061.jpg</code>。</li>
<li>单击打开。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-1-%E6%96%87%E4%BB%B6%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%A0%BC%E5%BC%8F%E9%80%89%E9%A1%B9.png" class="" title="图3-1-文件浏览器的格式选项.png">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-2-%E5%8A%A0%E8%BD%BD%E5%A4%9A%E4%B8%AA2D%E5%9B%BE%E5%83%8F.png" class="" title="图3-2-加载多个2D图像.png">
<h3 id="3-1-3-设置边界框"><a href="#3-1-3-设置边界框" class="headerlink" title="3.1.3 设置边界框"></a>3.1.3 设置边界框</h3><p>加载一系列位图图像时，通常不知道图像的物理尺寸到Avizo。因此，将出现<code>Image Read Parameters</code>对话框，提示您输入<code>Bounding Box</code>的物理范围。或者，可以设置单个体素的大小。在Avizo，对象的边界框是3D空间中最小的矩形，与轴对齐的体积，包含对象。<br>请注意，在Avizo中，统一数据集的边界框从第一个体素的中心到最后一个体素的中心。<br>例如，如果您有256个体素并且您知道如果体素大小为1 mm，则边界框应设置为0-255（或某些偏移范围）。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-3-Avizo%E4%B8%AD%E8%BE%B9%E7%95%8C%E6%A1%86%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8D%E5%90%8C%E7%9A%84%E7%81%B0%E8%89%B2%E9%98%B4%E5%BD%B1%E6%8F%8F%E7%BB%98%E4%BA%86%E5%B8%B8%E8%A7%84%E4%B8%8A%E5%AE%9A%E4%B9%89%E7%9A%84%E5%BC%BA%E5%BA%A6%E5%80%BC%E7%BD%91%E6%A0%BC%EF%BC%88%E7%99%BD%E7%BA%BF%EF%BC%89%E3%80%82%E9%BB%91%E8%89%B2%E6%AD%A3%E6%96%B9%E5%BD%A2%E8%A1%A8%E7%A4%BA%E4%B8%80%E4%B8%AA%E4%BD%93%E7%B4%A0%E7%9A%84%E8%8C%83%E5%9B%B4%E5%A4%96%E6%A1%86%E6%8F%8F%E7%BB%98%E4%BA%86%E8%BE%B9%E7%95%8C%E6%A1%86%E7%9A%84%E8%8C%83%E5%9B%B4.png" class="" title="图3-3-Avizo中边界框的定义不同的灰色阴影描绘了常规上定义的强度值网格（白线）。黑色正方形表示一个体素的范围外框描绘了边界框的范围.png">
<ul>
<li>在<code>Voxel Size</code>端口的第一，第二和第三文本字段中输<code>1</code>。</li>
<li>单击<code>OK</code>。</li>
</ul>
<p>此方法将始终创建具有统一坐标（即统一切片距离）的数据集。如果切片距离可变，则应使用<code>StackedSlices</code>格式。</p>
<h3 id="3-1-4-堆叠式切片文件格式"><a href="#3-1-4-堆叠式切片文件格式" class="headerlink" title="3.1.4 堆叠式切片文件格式"></a>3.1.4 堆叠式切片文件格式</h3><p>特别是对于组织学连续切片，通常会在准备过程中丢失切片。为了处理这种情况，Avizo提供了一种与文件格式相对应的特殊数据类型，称为<code>Stacked Slices</code>堆栈式切片。此文件格式允许使用可选的<code>z-</code>值读取一堆单独的图像文件对于每个切片。切片距离不需要恒定。图像必须是单通道或Avizo支持的图像格式的RGBA图像（例如TIFF）。阅读器使用ASCII进行操作描述文件，可以用任何编辑器编写。</p>
<p>这是描述文件的示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Avizo Stacked Slices</span><br><span class="line"># Directory where image files reside</span><br><span class="line">pathname C:/data/pictures</span><br><span class="line"># Pixel size in x- and y-direction</span><br><span class="line">pixelsize <span class="number">0.1</span> <span class="number">0.1</span></span><br><span class="line"># Image <span class="built_in">list</span> with z-positions</span><br><span class="line">picture1.tif <span class="number">10.0</span></span><br><span class="line">picture7.tif <span class="number">30.0</span></span><br><span class="line">picture13.tif <span class="number">60.0</span></span><br><span class="line">colstars.jpg <span class="number">330.0</span></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>关于语法的一些说明：</p>
<ul>
<li><code># Avizo Stacked Slices</code>是可选的标头，允许Avizo自动确定文件格式。</li>
<li><code>pathname</code>是可选的，如果图片与目录不在同一目录中，则可以包含路径名说明文件。空格将标记<code>pathname</code>与实际路径名分隔开。</li>
<li>在Windows系统上，路径名仍应使用 <code>/</code> 而不是 <code>\</code>。</li>
<li><code>pixelsize</code>像素大小也是可选的。该语句在<code>x</code>和<code>y</code>方向上指定像素大小。将生成的3D图像的边界框设置为<code>0</code>到<code>pixelize *</code>（<code>number_of_pixels-1</code>像素数-1）。</li>
<li><code>picture1.tif 10.0</code>是切片的名称及其<code>z-value</code>，以空格字符分隔。</li>
<li><code>end</code>表示描述文件的结尾。</li>
<li>注释用井号（<code>＃</code>）表示。</li>
</ul>
<h3 id="3-1-5-处理大磁盘数据"><a href="#3-1-5-处理大磁盘数据" class="headerlink" title="3.1.5 处理大磁盘数据"></a>3.1.5 处理大磁盘数据</h3><p>有时，图像数据太大，以致它们不适合计算机的主内存。Avizo可视化模块依赖于数据位于物理内存中这一事实，这意味着无法在Avizo中显示此类数据。为了克服这个问题，提供了一个专用模块它将大多数数据保留在磁盘上，并且仅检索用户指定的子卷。该子卷可以然后使用Avizo中的标准可视化模块进行可视化。</p>
<ul>
<li>使用<code>File/Open Data As...</code>对话框并转到<code>$AVIZO_ROOT/data /grain /</code></li>
<li>选择<code>grain.am</code>，然后按<code>Open</code>按钮。</li>
<li>选择<code>Avizo as Large Disk Data</code>作为格式，然后单击<code>OK</code>确认您的选择。</li>
</ul>
<p>数据将在项目视图中显示为常规的绿色数据图标。信息行指示它属于数据类<code>HxRawAsExternalData</code>。</p>
<ul>
<li>右键单击，附加<code>Extract Subvolume</code>模块。</li>
<li>在项目视图中选择<code>Extract Subvolume</code>模块，然后选取<code>Max width</code>，<code>Max height</code>和<code>Max depth</code>按钮。</li>
<li>选中子<code>Subsample</code>，然后在<code>Subsample</code>字段中输入<code>2 2 2</code>，然后按<code>Apply</code>按钮。</li>
</ul>
<p>这将检索数据的降采样版本。从<code>Extract Subvolume</code>断开<code>grain.view</code>数据图标通过在<code>grain.view</code>的主端口中选择<code>NO SOURCE</code>来提取子卷模块，以及将其用作概述（例如，使用<code>Orhto Slice</code>）。在<code>Extract Subvolume</code>的<code>DATA</code>端口中选择<code>NO SOURCE</code>子体积不会将<code>grain.view</code>与<code>Extract Subvolume</code>断开连接。</p>
<ul>
<li>在<code>Project View</code>中选择<code>Extract Subvolume</code>模块，然后取消选择<code>subsample</code>检查框。</li>
<li>使用查看器中的拖动器框调整子体积的大小。</li>
<li>按<code>Apply</code>。</li>
<li>将<code>Isosurface</code>模块附加到<code>grain2.view</code>（将阈值设置为100）。</li>
<li>按<code>Apply</code>。</li>
</ul>
<p>否则，将不显示等值面。</p>
<p><strong>提示</strong>：要浏览数据，请选中<code>auto-refresh</code>复选框以获取<code>Extract Subvolume</code>和<code>Isosurface</code>模块。现在，每次重新定位蓝色子体积拖动器时，都会自动更新可视化效果。</p>
<p>加载<code>Avizo, StackedSlices</code>，和<code>Raw &quot;as Large Disk Data&quot;</code>是一种方便快捷的浏览方式超出系统内存大小的数据。但是，尤其是对于<code>StackedSlices</code>，并非总是如此最有效的方法。Avizo可以以特殊格式存储图像数据，以方便从磁盘随机检索数据。</p>
<ul>
<li>从<code>File</code>菜单中选择<code>Convert to Large Data Format</code>。</li>
<li>从<code>Input</code>输入端口单击<code>Browse</code>。</li>
<li>单击<code>Add</code>，转到<code>$AVIZO ROOT/data/grain/</code>，然后选择<code>grain.am</code>，然后单击<code>OK</code>。</li>
<li>从<code>Output</code>输入端口单击<code>Browse</code>。</li>
<li>进入一个临时文件夹，然后输入您选择的文件名。</li>
<li>按<code>Apply</code>。</li>
</ul>
<p>尽管您很可能不会注意到本教程中使用的小图像数据有什么区别，这种用于检索大数据的方法可以显着加速<code>Apply</code>操作。</p>
<h3 id="3-1-6-使用核心外数据文件（LDA）"><a href="#3-1-6-使用核心外数据文件（LDA）" class="headerlink" title="3.1.6 使用核心外数据文件（LDA）"></a>3.1.6 使用核心外数据文件（LDA）</h3><p>核外管理工具可让您加载和可视化大于数据量的数据集安装在系统上的RAM，以及将这些数据集转换为LDA（Large Data Access）文件。这些LDA文件可用于可视化非常大的数据（数百GB），例如地震数据或显微镜数据，使用有限的内存。可以转换原始数据以下类型：Avizo，RawData和StackedSlices（SGI，TIFF，GIF，JPEG，BMP，PNG，JPEG2000，PGX，PNM和RAS光栅文件）。LDA数据允许子体积提取以显示零件的数量，或多分辨率访问以获取完整的子采样视图或精确的局部意见。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-4-1-%E5%B0%86Avizo%E7%94%A8%E4%BD%9C%E5%A4%A7%E7%A3%81%E7%9B%98%E6%95%B0%E6%8D%AE.png" class="" title="图3-4-1-将Avizo用作大磁盘数据">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-4-2-%E5%B0%86Avizo%E7%94%A8%E4%BD%9C%E5%A4%A7%E7%A3%81%E7%9B%98%E6%95%B0%E6%8D%AE.png" class="" title="图3-4-2-将Avizo用作大磁盘数据">
<p><em>图3.4</em>：<code>Avizo as Large Disk Data</code>用例。对于即时更新，提取的<code>auto-refresh</code>复选框<code>Extract Subvolume</code>和<code>Isosurface</code>模块被勾选。</p>
<p><em>注意</em>：标准情况下，Avizo最多可支持8GB大小的LDA数据。超过8GB，您将需要Avizo XLVolume扩展。<br>特别是，本教程将讨论以下主题：</p>
<p>1.调整大小阈值以允许转换<br>2.加载核外数据<br>3.原始数据参数<br>4.核心外转换<br>5.显示正交切片，切片和3D体积</p>
<p>请按照以下说明进行操作。每个步骤都建立在之前的步骤之上。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-5-%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E6%A8%A1%E5%9D%97%E7%9A%84%E8%BE%93%E5%85%A5%E5%AF%B9%E8%AF%9D%E6%A1%86.png" class="" title="图3-5-转换为大数据格式模块的输入对话框">
<p><em>图3.5</em>：<code>Convert to Large Data Format</code>模块的<code>Input</code>对话框。</p>
<h4 id="3-1-6-1-调整大小阈值以启用转换"><a href="#3-1-6-1-调整大小阈值以启用转换" class="headerlink" title="3.1.6.1 调整大小阈值以启用转换"></a>3.1.6.1 调整大小阈值以启用转换</h4><p>在<code>Edit</code>菜单上，选择<code>Preferences</code>。这将打开<code>AvizoPreferences</code>对话框。请选择<br>LDA选项卡（请参见图3.6）。使用滑块或文本字段，将阈值设置为10MB。加载时如果文件大小大于此阈值，将显示<code>out-of-core data</code>对话框。</p>
<p><em>注意</em>：要查看本教程中列出的图像，还应该使用<code>Edit/Preferences</code>菜单，然后在<code>Layout tab</code>中打开<code>show viewer in top-level window</code>显示查看器。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-6-Avizo%E9%A6%96%E9%80%89%E9%A1%B9LDA%E8%AE%BE%E7%BD%AE.png" class="" title="图3-6-Avizo首选项LDA设置">
<p><em>图3.6</em>：Avizo首选项，LDA设置</p>
<h4 id="3-1-6-2-加载核外数据"><a href="#3-1-6-2-加载核外数据" class="headerlink" title="3.1.6.2 加载核外数据"></a>3.1.6.2 加载核外数据</h4><p>请使用<code>File/Open Data...</code>菜单打开文件<code>grain.raw</code>（请参见图3.7）。该文件位于Avizo安装目录中的<code>$ AVIZO_ROOT/data/tutorials/outofcore/</code>。大小为16MB，高于定义的阈值。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-7-%E6%89%93%E5%BC%80%E6%A0%B8%E5%BF%83%E5%A4%96%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6.png" class="" title="图3-7-打开核心外数据文件">
<p><em>图3.7</em>：打开<code>out-of-core data</code>文件。</p>
<p>显示<code>Out-Of-Core data</code>对话框。显示三个加载选项（请参见图3.8）：</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-8-%E6%A0%B8%E5%A4%96%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%AF%9D%E6%A1%86.png" class="" title="图3-8-核外数据对话框">
<p><em>图3-8</em>：<code>Out-of-Core data</code>对话框。</p>
<ul>
<li><code>Convert to Large Data Access (LDA) format</code>：将文件转换为LDA文件，然后加载。<br>  • <code>PRO</code>：这会生成一个多分辨率文件，允许完整的交互式视图或本地完整的分辨率观看。<br>  • <code>CON</code>：这很费时，先进行一次初始转换，然后进行真正的转换一次。</li>
<li><code>ReadasExternalDiskData</code>：从磁盘读取数据块，从而几乎可以连续进行磁盘访问。<br>  • <code>PRO</code>：无需生成额外的文件。<br>  • <code>CON</code>：连续访问磁盘。数据集大于4GB时速度较慢。</li>
<li><code>Read complete volume into memory</code>：将全部数据加载到内存中，然后只访问内存。<br>  • <code>PRO</code>：适用于平均大小的数据。<br>  • <code>CON</code>：需要与您的数据集大小一样多的RAM。</li>
</ul>
<p>请选择<code>Convert to Large Data Access (LDA) format</code>。然后，在下一个对话框（目标文件），指定LDA目标文件。例如，在一个临时文件夹中的grain.lda（见图3.9）。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-9-%E9%80%89%E6%8B%A9LDA%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6.png" class="" title="图3-9-选择LDA目标文件">
<p><em>图3-9</em>：选择LDA目标文件。</p>
<p><em>注意</em>：然后可以加载<code>.lda</code>文件，而无需进行任何转换。<br>另一个选项允许您以批处理模式执行转换，以便您可以在运行其他进程的同时转换是在后台完成的。</p>
<h4 id="3-1-6-3-原始数据参数"><a href="#3-1-6-3-原始数据参数" class="headerlink" title="3.1.6.3 原始数据参数"></a>3.1.6.3 原始数据参数</h4><p>由于输入的数据是<code>raw</code>，因此请在<code>raw data parameters</code>对话框中填写以下信息：<br>下图（见图3.10）：</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-10-%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E5%8F%82%E6%95%B0%E9%9D%A2%E6%9D%BF.png" class="" title="图3-10-原始数据参数面板">
<p><em>图3-10</em>：<code>Raw data parameters</code>面板。</p>
<p>数据类型为<code>8-bit unsigned</code>，尺寸为 256 <em> 256 </em> 256。</p>
<h4 id="3-1-6-4-内核外转换"><a href="#3-1-6-4-内核外转换" class="headerlink" title="3.1.6.4 内核外转换"></a>3.1.6.4 内核外转换</h4><p>在转换过程中，进度栏会显示核心外转换进度（请参见图3.11）。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-11-%E6%A0%B8%E5%A4%96%E8%BD%AC%E6%8D%A2%E8%BF%9B%E5%BA%A6%E5%AF%B9%E8%AF%9D%E6%A1%86.png" class="" title="图3-11-核外转换进度对话框">
<p><em>图3-11</em>：<code>Out-of-core conversion</code>进度对话框。</p>
<p>此过程分为两个步骤。首先是初始步骤，然后是大约4MB / s（在P4上 2.6GHz，没有SATA磁盘）。您可以根据需要取消该过程。</p>
<p>转换后的文件现在位于<code>Project View</code>中，可以使用并连接到其他模块。</p>
<h4 id="3-1-6-5-显示Ortho-Slice-a-Slice-and-a-3D-Volume"><a href="#3-1-6-5-显示Ortho-Slice-a-Slice-and-a-3D-Volume" class="headerlink" title="3.1.6.5  显示Ortho Slice, a Slice, and a 3D Volume"></a>3.1.6.5  显示<code>Ortho Slice</code>, a <code>Slice</code>, and a <code>3D Volume</code></h4><p>右键单击项目视图中的数据图标。在<code>Display</code>子菜单中，选择<code>Ortho Slice</code>模块。重复<code>Slice</code>和<code>Volume Rendering</code>这些步骤。您还可以显示边界完整容量的盒子。</p>
<p>为了以相同的设置查看此场景，请将<code>grain.raw</code>转换为<code>grain.lda</code>（lda需要文件，并使用正确的名称），请加载项目<code>grain.hx</code>（在同一目录中<code>$AVIZO_ROOT/data/tutorials/outofcore</code>）。</p>
<h2 id="3-2-可视化3D图像"><a href="#3-2-可视化3D图像" class="headerlink" title="3.2 可视化3D图像"></a>3.2 可视化3D图像</h2><p>本节逐步介绍了常规标量字段的可视化，例如，3D图像数据。Avizo能够可视化更复杂的数据集，例如在曲线或四面体网格。不过，在本节中，我们考虑最简单的情况，即具有规则结构的标量字段。每个步骤都建立在之前的步骤之上。特别是以下将讨论以下主题：</p>
<ol>
<li><code>orthogonal slices</code> 正交片</li>
<li><code>simple threshold segmentation</code> 简单的阈值分割</li>
<li><code>resampling the data</code> 重新采样数据</li>
<li><code>displaying an isosurface</code> 显示等值面</li>
<li><code>cropping the data</code> 裁剪数据</li>
<li><code>volume rendering</code> 体积渲染</li>
</ol>
<p>我们首先加载第2部分（入门）中您已经知道的数据：3D图像数据集巧克力棒的 235 x 175 x 295 CT扫描的一部分。</p>
<ul>
<li>加载位于子目录<code>data/tutorials</code>中的文件<code>Chocolate-bar.am</code>。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-12-1-%E9%A1%B9%E7%9B%AE%E6%98%BE%E7%A4%BA-%E6%9F%A5%E7%9C%8B%E5%99%A8%E5%92%8C%E9%A1%B9%E7%9B%AE%E8%A7%86%E5%9B%BE.png" class="" title="图3-12-1-项目显示-查看器和项目视图">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-12-2-%E9%A1%B9%E7%9B%AE%E6%98%BE%E7%A4%BA-%E6%9F%A5%E7%9C%8B%E5%99%A8%E5%92%8C%E9%A1%B9%E7%9B%AE%E8%A7%86%E5%9B%BE.png" class="" title="图3-12-2-项目显示-查看器和项目视图">
<p><em>图 3.12</em>：项目显示（查看器和项目视图)。</p>
<h3 id="3-2-1-Orthogonal-Slices正交切片"><a href="#3-2-1-Orthogonal-Slices正交切片" class="headerlink" title="3.2.1 Orthogonal Slices正交切片"></a>3.2.1 <code>Orthogonal Slices</code>正交切片</h3><p>可视化3D图像数据最快，在许多情况下是最”标准”的方法是通过提取3D数据集中的正交切片。Avizo允许您显示多个不同的切片在单个查看器中同时定位。</p>
<ul>
<li>将<code>Bounding Box</code>模块连接到数据（在<code>Chocolate-bar.am</code>上使用鼠标右键）。</li>
<li>将<code>Ortho Slice</code>模块连接到数据。</li>
<li>将第二个和第三个<code>Ortho Slice</code>模块连接到数据。</li>
<li>选择<code>Ortho Slice 2</code>，然后在<code>Orientation</code>端口中按<code>xz</code>。</li>
<li>同样，对于<code>Ortho Slice 3</code>，选择<code>yz</code>方向。</li>
<li>将查看器中的对象旋转到更一般的位置。</li>
<li>在相应端口或直接在三个端口中更改三个<code>Ortho Slice</code>模块的切片编号查看器，如<code>Getting Started</code>部分所述。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-13-1-%E4%BD%BF%E7%94%A8%E4%B8%89%E4%B8%AA%E6%AD%A3%E4%BA%A4%E5%88%87%E7%89%87%E6%98%BE%E7%A4%BA%E7%9A%84%E5%B7%A7%E5%85%8B%E5%8A%9B%E6%A3%92%E6%95%B0%E6%8D%AE%E9%9B%86.png" class="" title="图3-13-1-使用三个正交切片显示的巧克力棒数据集">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-13-2-%E4%BD%BF%E7%94%A8%E4%B8%89%E4%B8%AA%E6%AD%A3%E4%BA%A4%E5%88%87%E7%89%87%E6%98%BE%E7%A4%BA%E7%9A%84%E5%B7%A7%E5%85%8B%E5%8A%9B%E6%A3%92%E6%95%B0%E6%8D%AE%E9%9B%86.png" class="" title="图3-13-2-使用三个正交切片显示的巧克力棒数据集">
<p><em>图 3.13</em>：使用三个正交切片显示的巧克力棒数据集。</p>
<p>除了<code>Ortho Slice</code>模块之外，该模块允许您提取与坐标正交的切片Avizo还提供了用于在任意方向上切片的模块。这个更通用的模块是叫做<code>Slice</code>。您可能想通过从巧克力条的<code>Display</code>子菜单中选择它来进行尝试数据弹出菜单。</p>
<h3 id="3-2-2-简单数据分析"><a href="#3-2-2-简单数据分析" class="headerlink" title="3.2.2 简单数据分析"></a>3.2.2 简单数据分析</h3><p><code>Ortho Slice</code>模块的<code>Colormap</code>端口的值确定要映射的标量值分别为黑色或白色。如果选择范围，例如30 … 100，则任何小于或等于30将变为黑色，并且所有关联值大于100的像素将变为白色。尝试修改范围。此端口提供了一种确定阈值的简单方法，以后可以用于分割，例如将背景像素与其他结构分开。这可能是最通过使最大值和最小值一致可以轻松完成。</p>
<ul>
<li>卸下两个<code>Ortho Slice</code>模块。</li>
<li>选择剩余的<code>Ortho Slice</code>模块。</li>
<li>确保将<code>Mapping Type</code>设置为<code>Colormap</code>。</li>
<li>更改<code>Colormap</code>端口的最小值和最大值，直到这些值相同并获得合适的分割结果。对于此数据，最小值为410，值为411最大值应该是一个好的阈值。</li>
</ul>
<p>定量检查数据集强度值的一种更强大的方法是使用数据探测模块<code>Point Probe</code>或者<code>Line Probe</code>。但是，我们不会在本简介中讨论这些模块教程。</p>
<h3 id="3-2-3-重采样数据"><a href="#3-2-3-重采样数据" class="headerlink" title="3.2.3 重采样数据"></a>3.2.3 重采样数据</h3><p>现在，我们将计算和显示<code>Isosurface</code>(等值面)。在此之前，我们将对数据重采样。重采样过程将产生分辨率更高的数据集。虽然这是等值面工具不需要工作，它减少了计算时间并改善了渲染效果性能。此外，您将熟悉另一种类型的模块。<code>Resample</code>模块是一个计算模块。计算模块由红色图标表示。通常，您必须按<code>Properties</code>区域底部的绿色<code>Apply</code>按钮开始计算。在你之后按下此按钮，它们将产生一个包含结果的新数据对象。</p>
<ul>
<li>将<code>Resample</code>模块连接到数据并选择它。</li>
<li>输入用于较粗分辨率的值，例如x = 64，y = 64，z = 64。</li>
<li>按<code>Apply</code>按钮。</li>
</ul>
<p>代表重新采样计算输出的新绿色数据图标，名为<code>Chocolate-bar.Resampled</code>已创建。您可以将此新数据集视为原始巧克力块数据。在重新采样的巧克力棒的弹出菜单中，您会发现完全相同的可连接模块和您可以像原始数据一样保存，导出和加载它。</p>
<p>您可能需要使用<code>Ortho Slice</code>模块将重新采样的数据集与原始数据集进行比较。您可以简单地选择指示数据连接的黑线并将其拖到其他数据源。只要鼠标指针悬停在有效源上，连接线就会以灰色突出显示。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-14-1-%E8%B0%83%E6%95%B4Ortho%20Slice%E6%A8%A1%E5%9D%97%E7%9A%84%E6%95%B0%E6%8D%AE%E7%AA%97%E5%8F%A3.png" class="" alt="图3-14-1-调整Ortho Slice模块的数据窗口">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-14-2-%E8%B0%83%E6%95%B4Ortho%20Slice%E6%A8%A1%E5%9D%97%E7%9A%84%E6%95%B0%E6%8D%AE%E7%AA%97%E5%8F%A3.png" class="" alt="图3-14-2-调整Ortho Slice模块的数据窗口">
<p><em>图 3.14</em>：通过调整<code>Ortho Slice</code>模块的数据窗口，可以找到合适的阈值分割值。小于最小值的强度值将被映射为黑色，大于最大值的强度值将被映射为白色。</p>
<h3 id="3-2-4-显示等值面"><a href="#3-2-4-显示等值面" class="headerlink" title="3.2.4 显示等值面"></a>3.2.4 显示等值面</h3><p>对于3D图像数据集，等值面可用于提供对象3D形状的印象。等值面会包围体积中所有比某些用户定义的阈值亮的部分。</p>
<ul>
<li>关闭<code>Ortho Slic</code>模块的查看器切换。</li>
<li>将<code>Isosurface</code>模块连接到重新采样的数据记录并选择它。</li>
<li>将阈值端口调整为450或类似值。</li>
<li>按<code>Apply</code>按钮。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-15-1-%E4%BD%BF%E7%94%A8%E7%AD%89%E5%80%BC%E9%9D%A2%E5%9C%A83D%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9A%84%E5%B7%A7%E5%85%8B%E5%8A%9B%E6%A3%92%E6%95%B0%E6%8D%AE%E9%9B%86.png" class="" title="图3-15-1-使用等值面在3D模式下可视化的巧克力棒数据集">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-15-2-%E4%BD%BF%E7%94%A8%E7%AD%89%E5%80%BC%E9%9D%A2%E5%9C%A83D%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9A%84%E5%B7%A7%E5%85%8B%E5%8A%9B%E6%A3%92%E6%95%B0%E6%8D%AE%E9%9B%86.png" class="" title="图3-15-2-使用等值面在3D模式下可视化的巧克力棒数据集">
<p><em>图 3.15</em>：使用等值面在3D模式下可视化的巧克力棒数据集。</p>
<h3 id="3-2-5-裁剪数据"><a href="#3-2-5-裁剪数据" class="headerlink" title="3.2.5 裁剪数据"></a>3.2.5 裁剪数据</h3><p>如果您仅对字段的一部分感兴趣，则裁剪数据很有用。提供了作物编辑器以此目的。其用法描述如下：</p>
<ul>
<li>拆下重新采样的数据<code>chocolate-bar.Resampled</code>。</li>
<li>激活<code>Ortho Slice</code>模块的显示。</li>
<li>选择<code>Chocolate-bar.am</code>数据图标。</li>
<li>单击<code>Properties</code>区域中的<code>Crop Editor</code>按钮。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-16-%E8%A3%81%E5%89%AA%E7%BC%96%E8%BE%91%E5%99%A8.png" class="" title="图3-16-裁剪编辑器">
<p><em>图 3.16</em>：裁剪编辑器在统一标量字段上工作。它允许您裁剪数据集，通过复制边界来扩大数据集体素，或修改其坐标，即缩放或移动其边界框。</p>
<p>弹出一个新窗口。裁剪数据集有两种方法。您可以输入所需的X，Y和Z坐标的范围进入作物编辑器的窗口或将查看器置于交互模式并直接在查看器窗口中使用绿色手柄调整裁剪框。</p>
<ul>
<li>将查看器置于交互模式。</li>
<li>用鼠标左键，选择连接到作物体积的绿色手柄之一。拖动并变换音量，直到包含您感兴趣的数据部分。</li>
<li>在<code>crop editor’s</code>的对话框窗口中按<code>OK</code>。</li>
</ul>
<p>数据集的新维度在<code>Properties</code>区域中给出。如果您想与此一起工作在以后的会话中裁剪数据记录，应通过选择<code>Save Data As ...</code>或<code>Export Data As ...</code>将其保存从<code>File</code>菜单中。</p>
<p>您可能已经注意到，裁剪编辑器还允许您重新缩放图形对象数据集的边界框。仅通过更改边界框，就不会裁剪任何体素。您也可以使用农作物编辑器以扩大数据集，例如，通过为<code>Min index</code>字段输入负值。在这种情况下，数据集的第一片将根据需要重复多次。此外，边界框将是自动更新。</p>
<h3 id="3-2-6-体积渲染"><a href="#3-2-6-体积渲染" class="headerlink" title="3.2.6 体积渲染"></a>3.2.6 体积渲染</h3><p>体积渲染是一种可视化技术，可以为整个数据集提供3D印象，而无需分割。基本模型基于与以下物质有关的光的发射和吸收视图体积的每个体素。该算法模拟通过该体积投射光线来自预设来源。它确定到达射线的每个体素并发出多少光或被体素吸收。然后，它计算从当前视点可以隐含看到的内容通过当前体积相对于观察平面的放置，模拟视线的投射从观察点发出光线穿过体积。</p>
<h4 id="3-2-6-1-使用体积渲染模块"><a href="#3-2-6-1-使用体积渲染模块" class="headerlink" title="3.2.6.1 使用体积渲染模块"></a>3.2.6.1 使用体积渲染模块</h4><ul>
<li>删除<code>Project View</code>中的<code>Chocolate-bar.am</code>数据记录以外的所有对象。</li>
<li>选择数据图标并读取<code>Data info</code>行中打印的数据值范围（最小最大值：0 … 1910）。</li>
<li>将<code>Volume Rendering</code>模块连接到数据。</li>
<li>加载位于<code>AVIZO_ROOT/data/colormaps/volrenChocolate.am.</code>的巧克力色图。</li>
<li>更改<code>Volume Rendering</code>模块的颜色图：在<code>Colormap</code>端口中，单击<code>Edit</code>，然后选择<code>volrenChocolate.am</code>。（如果您尚未加载颜色图，则仍然可以通过以下方式选择它：单击<code>Edit &gt; Options &gt; Load colormap...</code>）。</li>
<li>将<code>Volume Rendering</code>的<code>Colormap</code>端口中的范围设置为410..1910。</li>
<li>选择<code>olume Rendering Settings</code>，然后将<code>lighting</code>更改为<code>none</code>。</li>
</ul>
<p>默认情况下，显示发射吸收体积渲染。发出的光量和从体素吸收的颜色是从连接到体积的颜色图的颜色和Alpha值中获取的<code>Volume Rendering</code>模块。在我们的示例中，对于较小的值，颜色图的不透明性较小。您可以尝试设置色彩图的下限为0或900，以便更好地感受转换功能。</p>
<ul>
<li>确保选择了<code>Volume Rendering Settings</code>。</li>
<li>将<code>lighting</code>设置为<code>Specular</code>。</li>
</ul>
<h4 id="3-2-6-2-使用Volren模块"><a href="#3-2-6-2-使用Volren模块" class="headerlink" title="3.2.6.2 使用Volren模块"></a>3.2.6.2 使用Volren模块</h4><p><code>Volren</code>模块是Avizo中体积渲染的最新功能，并充分利用了现代图形卡的功能。</p>
<p><code>Volren</code>模块提供了几种可视化技术：</p>
<ul>
<li>阴影和经典的基于纹理的volum渲染（VRT）。<br>  标准VRT及其带阴影的版本可实现具有灵活色彩的直接3D可视化虚拟照明效果的透明和透明色图可更好地渲染复杂的空间结构并增强细节。</li>
<li>最大强度投影（MIP）。<br>  MIP渲染允许可视化最高或最低沿当前视线的数据量中的强度。</li>
<li>数字重建的射线照片（DRR）。<br>  DRR模拟射线照片显示从使用加载的体积数据的任意视图。此外，<code>Volren</code>模块使您能够使用不同的颜色图同时渲染分段区域。可以附加<code>LabelField</code>到<code>Volren</code>，标签列表中的每种材料都可以单独呈现。</li>
</ul>
<p>为了优化在性能方面，当图像之间进行渲染时，图像体积将以较低的分辨率表示。对于较大的图像量，您还可以切换到恒定的<code>Low Resolution</code>模式（见下文）。<code>Volren</code>专为与流行的图形加速器技术（例如NVIDIA）一起使用而设计Quadro FX图形板。</p>
<ul>
<li>删除项目视图中的<code>Chocolate-bar.am</code>数据记录以外的所有对象。</li>
<li>将<code>Volren</code>模块连接到数据。</li>
<li>选择数据图标并读取打印在第一条信息行上的数据值范围（410 … 1910）。</li>
<li>选择<code>Volren</code>模块，然后在<code>Colormap</code>端口中输入范围。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-18-1-%E5%B0%86%E7%85%A7%E6%98%8E%E8%AE%A1%E7%AE%97%E5%BA%94%E7%94%A8%E4%BA%8E%E4%BD%93%E7%A7%AF%E6%B8%B2%E6%9F%93.png" class="" title="图3-18-1-将照明计算应用于体积渲染">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-18-2-%E5%B0%86%E7%85%A7%E6%98%8E%E8%AE%A1%E7%AE%97%E5%BA%94%E7%94%A8%E4%BA%8E%E4%BD%93%E7%A7%AF%E6%B8%B2%E6%9F%93.png" class="" title="图3-18-2-将照明计算应用于体积渲染">
<p><em>图 3.18</em>：将照明计算应用于体积渲染，从而使表示更易于理解。</p>
<p>注意事项和限制</p>
<ul>
<li>在某些系统上，如果数据集大于可用数据集，则可能会显着降低速度纹理内存（通常为4-16MB）。在这种情况下，请仅选择选项<code>LowRes</code>（请参见下面）。</li>
<li>使用两个或多个<code>Volren</code>模块渲染相交的体积时（多体积渲染），则可能会出现一些渲染错误。如果是多体积渲染，则支持模式的组合是一个MIP和一个MIP或一个VRT和一个VRT（请参阅<br>模式下）。其他模式和组合可能会导致错误的视觉效果。</li>
<li>仅在必须重新计算渲染时才启用<code>Apply</code>按钮。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-19-1-Volren%E6%A8%A1%E5%9D%97%E5%8F%AF%E7%94%A8%E4%BA%8E%E7%94%9F%E6%88%90%E6%9C%80%E5%A4%A7%E5%BC%BA%E5%BA%A6%E6%8A%95%E5%BD%B1%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8E%E5%8F%91%E5%B0%84%E5%90%B8%E6%94%B6%E6%A8%A1%E5%9E%8B.png" class="" title="图3-19-1-Volren模块可用于生成最大强度投影以及基于发射吸收模型">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-19-2-Volren%E6%A8%A1%E5%9D%97%E5%8F%AF%E7%94%A8%E4%BA%8E%E7%94%9F%E6%88%90%E6%9C%80%E5%A4%A7%E5%BC%BA%E5%BA%A6%E6%8A%95%E5%BD%B1%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8E%E5%8F%91%E5%B0%84%E5%90%B8%E6%94%B6%E6%A8%A1%E5%9E%8B.png" class="" title="图3-19-2-Volren模块可用于生成最大强度投影以及基于发射吸收模型">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-19-3-Volren%E6%A8%A1%E5%9D%97%E5%8F%AF%E7%94%A8%E4%BA%8E%E7%94%9F%E6%88%90%E6%9C%80%E5%A4%A7%E5%BC%BA%E5%BA%A6%E6%8A%95%E5%BD%B1%E4%BB%A5%E5%8F%8A%E5%9F%BA%E4%BA%8E%E5%8F%91%E5%B0%84%E5%90%B8%E6%94%B6%E6%A8%A1%E5%9E%8B.png" class="" title="图3-19-3-Volren模块可用于生成最大强度投影以及基于发射吸收模型">
<p><em>图 3.19</em>：Volren模块可用于生成最大强度投影以及基于发射吸收模型。</p>
<h4 id="3-2-6-3-Volren，Voltex和Volume-Rendering模块之间的比较"><a href="#3-2-6-3-Volren，Voltex和Volume-Rendering模块之间的比较" class="headerlink" title="3.2.6.3 Volren，Voltex和Volume Rendering模块之间的比较"></a>3.2.6.3 <code>Volren</code>，<code>Voltex</code>和<code>Volume Rendering</code>模块之间的比较</h4><p>开发了<code>Volume Rendering</code>模块以利用现代图形硬件。在旧版图形硬件上渲染可能会失败。在某些情况下，可以通过更新来解决图形驱动程序。否则，可以尝试使用<code>Volren</code>或<code>Voltex</code>模块。比较三个模块之间的关系如(图 3.20)所示。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-20-Volren%E5%92%8CVolume%20Rendering%E5%92%8CVoltex%E6%A8%A1%E5%9D%97%E4%B9%8B%E9%97%B4%E7%9A%84%E6%AF%94%E8%BE%83.png" class="" alt="图3-20-Volren和Volume Rendering和Voltex模块之间的比较">
<p><em>图 3.20</em>：<code>Volren</code>，<code>Volume Rendering</code>和<code>Voltex</code>模块之间的比较。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">特征</th>
<th style="text-align:center">Voltex(废弃)</th>
<th style="text-align:center">Volren</th>
<th style="text-align:center">Volume Rendering</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">鼠标采摘</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">等值面渲染</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√(单独的模块)</td>
</tr>
<tr>
<td style="text-align:center">体素化渲染</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√(单独的模块)</td>
</tr>
<tr>
<td style="text-align:center">DDR渲染(模拟数字重建射线照相)</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
<td style="text-align:center">×</td>
</tr>
<tr>
<td style="text-align:center">MIP渲染(最大强度投影)</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">灯光和阴影效果</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√(漫反射，镜面反射)</td>
<td style="text-align:center">√(漫反射，镜面反射，增强，边缘，边界，环境，递延，高质量)</td>
</tr>
<tr>
<td style="text-align:center">用户定义的光系数</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
<td style="text-align:center">×</td>
</tr>
<tr>
<td style="text-align:center">灯光角度控制</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√(端口阴影：用户定义)</td>
<td style="text-align:center">菜单视图/灯光创建自定义光源和停用灯</td>
</tr>
<tr>
<td style="text-align:center">投射阴影</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">多通道现场输入</td>
<td style="text-align:center">√</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">色域输入(RGBA)</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">标签字段辅助输入和每个标签的颜色图</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
<td style="text-align:center">×</td>
</tr>
<tr>
<td style="text-align:center">标签颜色图支持(cy-cling，无内插)</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">多卷支持</td>
<td style="text-align:center">Limited</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">支持大于图形内存</td>
<td style="text-align:center">√(砌砖非常有限,具有一致的分辨率)</td>
<td style="text-align:center">√(静止时的全分辨率，互动时分辨率低)</td>
<td style="text-align:center">√(渐进式自适应分辨率,受内存阈值限制)</td>
</tr>
<tr>
<td style="text-align:center">支持大于主内存(RAM)</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√(将数据转换为LDA格式)</td>
</tr>
<tr>
<td style="text-align:center">LDA格式支持(大数据访问实现渐进式加载，即时预览，从核心外快速提取)</td>
<td style="text-align:center">×</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">投资回报率框：关注区域</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">自定义ROI</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√(切角：排除角)</td>
<td style="text-align:center">√(体积渲染的ROI框：排除箱，围栏，十字，子体积)</td>
</tr>
<tr>
<td style="text-align:center">硬件支援</td>
<td style="text-align:center">旧显卡</td>
<td style="text-align:center">现代图形卡过时的驱动程序（例如 英伟达Quadro）</td>
<td style="text-align:center">现代图形卡过时的驱动程序（例如 英伟达Quadro）。需要高级支持着色器需要高级OpenGL功能那个可能无法使用或存在错误特定的图形卡，考虑使用Voltex作为替代品-本机。从Console创建Voltex，键入命令：<code>create HxVoltex</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="3-3-将3D和2D视图与正视图（Avizo）组合"><a href="#3-3-将3D和2D视图与正视图（Avizo）组合" class="headerlink" title="3.3 将3D和2D视图与正视图（Avizo）组合"></a>3.3 将3D和2D视图与正视图（Avizo）组合</h2><p>本教程需要Avizo许可证（Avizo Lite Edition许可证是不够的）。<br>在本教程中，您将学习使用Avizo有效可视化和检查3D图像的基础知识：</p>
<ul>
<li>快速开始查看3D图像。</li>
<li>使用正交视图管理组合的3D和2D切片视图。</li>
</ul>
<p>您可以将本教程用作使用Avizo可视化和处理3D图像的快速入门。但是，您应该熟悉Avizo的基本概念才能充分利用本教程。特别是，您应该能够加载文件，与3D查看器进行交互以及将模块连接到<br>数据模块。Avizo第2章-入门中讨论了所有这些问题。作为补充，本教程中，您还可以查看有关Avizo Lite Edition的第3.2节（可视化3D图像）3D图像可视化技术。</p>
<h3 id="3-3-1-快速入门"><a href="#3-3-1-快速入门" class="headerlink" title="3.3.1 快速入门"></a>3.3.1 快速入门</h3><p>这是如何简单地检查具有一个3D视图和2D视图中的3个正交切片的3D图像数据。</p>
<p>我们首先加载教程第2节（入门）中使用的数据：巧克力棒CT扫描的一部分3D图像数据（请参见图 3.22）。</p>
<ul>
<li>将文件<code>chocolate-bar.am</code>加载到Avizo安装程序的子目录<code>data/tutorials</code>中，关系目录。</li>
<li>右键单击<code>Project View</code>中出现的绿色数据图标。在对象弹出窗口中，选择类别模板（称为模板<code>Templates</code>），然后双击<code>Ortho Views Template</code>（或单击<code>Create</code>），见图3.21。您还可以使用搜索字段并输入的前几个字母<code>Ortho Views Template</code>，然后在列表中选择模块将自动在<code>Project View</code>。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-21-%E6%AD%A3%E4%BA%A4%E8%A7%86%E5%9B%BE%E6%A8%A1%E6%9D%BF%E8%8F%9C%E5%8D%95.png" class="" title="图3-21-正交视图模板菜单">
<p><em>图 3.21</em>：“正交视图模板”菜单。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-22-%E4%BD%BF%E7%94%A8Ortho%20Views%E6%A8%A1%E6%9D%BF%E6%98%BE%E7%A4%BA%E7%9A%84CT%E6%89%AB%E6%8F%8F3D%E5%9B%BE%E5%83%8F.png" class="" alt="图3-22-使用Ortho Views模板显示的CT扫描3D图像">
<p><em>图 3.22</em>：使用Ortho Views模板显示的CT扫描3D图像。</p>
<p>您现在可以尝试进行一些互动了。您可以参考3D导航中的第2节（入门）查看器窗口。</p>
<ul>
<li>在2D查看器中，您可以通过按住鼠标左键拖动鼠标来缩放，或平移用鼠标中键查看。为此，鼠标光标的形状应放大玻璃图标，否则按[ESC]键或使用工具栏按钮切换到查看器导航模式。</li>
<li>在3D查看器中，您可以旋转视图。为此，鼠标光标形状应为手形图标，否则按[ESC]键或使用工具栏按钮切换到查看器导航模式。</li>
<li>在<code>Ortho Views</code>模块的<code>Properties</code>面板中，可以拖动控制切片的滑块数。</li>
<li>您也可以在2D视图中拾取十字线，以移动相应的切片。您可能需要按[ESC]键或按查看器工具栏按钮<code>Interact</code>切换到<code>pick interaction</code>模式。</li>
</ul>
<p>在转到下一个教程步骤之前，需要进行一些解释。<br>您使用的所谓的<code>Template</code>菜单在<code>Project View</code>中创建了一组<code>display</code>模块（表示形式）附加到数据：</p>
<ol>
<li><code>Ortho Views</code>，用于管理4个查看器窗口布局中三个正交切片的显示。下一节将对其进行更详细的描述。</li>
<li><code>Intensity Ranges Contours</code>叠加模块在正交切片上显示一组轮廓对应于<code>Intensity Range Partitioning</code>，概念范围在本章后面介绍。</li>
<li><code>Volume Rendering</code>模块在左上角的查看器窗口中显示3D图像。</li>
<li><code>Isosurface</code>渲染模块，最初在查看器窗口中不可见。</li>
</ol>
<p>在<code>Project View</code>中选择一个模块时（通过在<code>Project View</code>中单击模块图标），其控制参数（称为<code>ports</code>）显示在<code>Properties</code>面板中。要选择多个模块，单击时按住Shift键。</p>
<p><em>提示</em>：有关如何创建模板项目的信息，请参阅第11.1.1章（模板项目）。</p>
<h3 id="3-3-2-使用正交视图Ortho-Views管理组合的3D和2D视图"><a href="#3-3-2-使用正交视图Ortho-Views管理组合的3D和2D视图" class="headerlink" title="3.3.2 使用正交视图Ortho Views管理组合的3D和2D视图"></a>3.3.2 使用正交视图<code>Ortho Views</code>管理组合的3D和2D视图</h3><p><code>Ortho Views</code>模块扩展了Avizo中的切片可视化效果。使用<code>Ortho Views</code>模块，三个同时显示不同的轴向视图，每个轴向视图都在各自的轴向锁定的查看器中。</p>
<p>创建<code>Ortho Views</code>后，查看器面板将切换为四查看器布局。全部三个正交全部视图显示在第一个左上方的查看器中。最初的行为是让右上方的观看者显示XY视图，在XZ视图的右下方，在YZ视图的左下方。</p>
<p>显示的切片是同步的，因此当切片索引更改时，更改将反映在所有合适的视图。</p>
<p>您可以通过四种方法尝试更改显示的切片的切片索引：</p>
<ul>
<li>在属性端口中拖动滑块。</li>
<li>直接在3D查看器中拖动切片。</li>
<li>在2D查看器中拖动切片指示符线（十字线）。如果您拖动绿线，则绿色概述的切片将发生变化。</li>
<li>在四个查看器中的任何一个中，在按住<code>Ctrl</code>键的同时单击鼠标中键：将切片移动到相应的拾取位置。为此，鼠标光标形状应是箭头图标，否则按[ESC]。</li>
</ul>
<p>切片可用于裁剪3D视图中的表示形式：</p>
<ul>
<li>在<code>Properties</code>面板中，单击<code>clip</code>按钮（小立方体被蓝线分割，请参见图3.23）或<code>Ortho View</code>的<code>Slice Number</code>Z端口中（如果滑块在<code>Properties</code>面板中不可见，在<code>Project View</code>中选择<code>Ortho Views</code>模块）。然后，您将看到3D切割体积渲染表示（请参见图3.24）。</li>
<li>通过上述任何方法移动Z切片，并查看更新的3D视图。</li>
<li>旋转3D视图（有关导航，请参见上文）。剪裁的一面始终面向相机。请注意，与<code>Ortho Views</code>的标准行为相反，这是<code>Ortho Views</code>的特定功能，Avizo中其他切片模块中的剪切平面。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-23-Ortho%20Views%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84%E2%80%9C%E5%8F%AF%E8%A7%81%E6%80%A7%E2%80%9D%E6%8C%89%E9%92%AE%E5%92%8C%E2%80%9C%E5%89%AA%E8%BE%91%E2%80%9D%E6%8C%89%E9%92%AE.png" class="" alt="图3-23-Ortho Views模块中的“可见性”按钮和“剪辑”按钮">
<p><em>图 3.23</em>：Ortho Views模块中的“可见性”按钮和“剪辑”按钮。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-24-%E6%AD%A3%E4%BA%A4%E8%A7%86%E5%9B%BE%E8%A3%81%E5%89%AA.png" class="" title="图3-24-正交视图裁剪">
<p><em>图 3.24</em>：正交视图裁剪。</p>
<p>可以使用Avizo以标准方式控制2D和3D查看器中切片的可见性，方法是：单击<code>Project View</code>中图标中的橙色方形按钮，或在<code>Project View</code>属性面板。有关项目视图的信息，请参见第10.1.9章。</p>
<ul>
<li>您可以隐藏切片，强度范围等高线和十字准线，并显示体积渲染，如图3.25所示。您将需要使用<code>Ortho Views</code>，<code>Bkg Properties</code>，<code>Intensity Ranges Contours</code>和<code>Volume Rendering</code>模块如图3.26所示。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-25-%E5%85%B7%E6%9C%89%E6%AD%A3%E4%BA%A4%E8%A7%86%E5%9B%BE%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7%E6%8E%A7%E4%BB%B6.png" class="" title="图3-25-具有正交视图的可见性控件">
<p><em>图 3.25</em>：具有正交视图的可见性控件。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-26-%E6%A8%A1%E5%9D%97%E5%9B%BE%E6%A0%87%E4%B8%AD%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7%E6%8C%89%E9%92%AE.png" class="" title="图3-26-模块图标中的可见性按钮">
<p><em>图 3.26</em>：模块图标中的可见性按钮。</p>
<p><em>更进一步</em>：这里是使用正交视图的更多提示，请参阅相关的参考帮助更多细节。</p>
<ul>
<li>要退出<code>Ortho Views</code>模式，只需删除<code>Ortho Views</code>模块即可。您也可以点击在查看器工具栏按钮上，将活动查看器（带有白色框）设置为<code>Single Viewer</code>。<code>Ortho Views</code>仍然处于活动状态：再次单击<code>Single viewer</code>按钮以循环浏览其他视图查看器，然后按<code>Four viewer</code>按钮以还原<code>Ortho Views</code>布局。</li>
<li>叠加表示可以与图像切片组合，如强度所示本章前面所述的<code>Ortho Views</code>模板的范围轮廓。你也可以通过<code>Bkg Properties</code>模块的<code>Layer order</code>端口控制叠加层的显示顺序与<code>Ortho Views</code>关联。</li>
<li>Avizo能够灵活地将多个数据和表示形式合并为一个或多个视图。<code>Ortho Views</code>也是如此：可以使任何3D表示形式可见，在2D视图中被裁剪或移动到切片的背景（如下图所示）。</li>
<li><code>Ortho Views</code>也可以附加到曲面数据，请参见图3.27。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-27-%E4%BD%BF%E7%94%A8%E2%80%9C%E6%AD%A3%E8%A7%86%E5%9B%BE%E2%80%9D%E6%98%BE%E7%A4%BA%E7%9A%84%E6%8F%90%E5%8F%96%E8%A1%A8%E9%9D%A2.png" class="" title="图3-27-使用“正视图”显示的提取表面">
<p><em>图 3.27</em>：使用“正视图”显示的提取表面。</p>
<p><em>注意</em>：专案中只能使用一个<code>Ortho View</code>，因此您无法附加第二个<code>Ortho View</code>从数据对象菜单查看。但是，可以通过以下方式通过更改<code>Ortho View</code>可视化的数据，将连接从一个图像更改为另一图像。为此，您可以将连接线拖入<code>Project Graph</code>视图，将<code>Ortho View</code>图标拖动到另一个数据项，或更改数据连接<code>Properties panel</code>中的端口。</p>
<h2 id="3-4-强度范围分区"><a href="#3-4-强度范围分区" class="headerlink" title="3.4 强度范围分区"></a>3.4 强度范围分区</h2><p>本教程需要Avizo许可证（Avizo Lite Edition许可证是不够的）。<br>灰度图像中编码的强度值通常表示有关对象的一些关键属性。例如，在X射线CT图像中，强度值与质量密度相关。Avizo的<code>Intensity Range Partitioning</code>工具可让您为不同强度范围图片分配一些含义。</p>
<p>例如，在岩石样品的CT扫描中，不同的强度范围可能表示：</p>
<ul>
<li>周围的空气，毛孔（空隙），</li>
<li>水，</li>
<li>粘土，</li>
<li>矿物。</li>
</ul>
<p>鉴于在工业零件的CT扫描中，强度可能会区分以下材料：</p>
<ul>
<li>周围的空气，毛孔（空隙），</li>
<li>铸铝部件，</li>
<li>铸钢部件，</li>
<li>夹杂物。</li>
</ul>
<p>Avizo的强度范围分区工具可让您定义范围，以便可视化和计算模块可以利用此预定义的标识。强度范围分区用于Avizo中的几个位置。例如，它允许将端口描绘的范围调整为特定范围（大部分时间代表一种材料）。它还大大简化了可视化设置。它是可能是因为强度范围分区包含“外部”属性，可以将其设置为任何范围。然后，很容易将“可用”范围定义为不属于“外部”范围的所有内容。</p>
<p>在本教程中，您将学习如何定义和使用<code>Intensity Range Partitioning</code>强度范围分区以及它如何影响。例如，使用引擎CT扫描的体绘制表示进行<code>Volume Rendering</code>可视化，以前的教程中已经使用的块部件。</p>
<ul>
<li>让我们从头开始并创建一个新项目（在<code>File</code>菜单中选择<code>New Project</code>）。</li>
<li>在<code>Avizo Edit</code>菜单中选择条目<code>Preferences</code>，并确保<code>Intensity Range Parttioning</code>设置选项根据图3.28所示的默认设置进行设置：自动猜测两个加载的图像数据中的材料密度（即强度中的空隙和实心范围/区域）。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-28-Avizo%E9%A6%96%E9%80%89%E9%A1%B9%E9%9D%A2%E6%9D%BF.png" class="" title="图3-28-Avizo首选项面板">
<p><em>图 3.28</em>：Avizo首选项面板。</p>
<ul>
<li>加载位于安装目录的子目录<code>data/tutorials</code>的文件<code>motor.am</code>。</li>
<li>将<code>Volume Rendering</code>附加到数据：右键单击项目中出现的绿色数据图标查看，单击<code>Volume Rendering</code>，然后按<code>Create</code>，请参见图3.29。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-29-%E4%BD%93%E7%A7%AF%E6%B8%B2%E6%9F%93%E7%BD%91%E7%BB%9C.png" class="" title="图3-29-体积渲染网络">
<p><em>图 3.29</em>：体积渲染网络。</p>
<p>如第3.2节（可视化3D图像）所述，<code>Volume Rendering</code>模块会显示颜色和不透明度取决于颜色映射端口的输入数据体素的位置。配色图像默认值（volrenWhite.am）一样，强度值低于下限（小于最小的颜色映射端口是完全透明的，请参见图3.30。更改此最小值是一种简便的方法，可以过滤掉3D体积图像中无效或低密度材料的部分。在这里已根据数据上的<code>Intensity Range Partitioning</code>预设设置了颜色图边界下面。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-30-%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%BC%BA%E5%BA%A6%E8%8C%83%E5%9B%B4%E5%88%86%E5%8C%BA%E6%9F%A5%E7%9C%8B%E5%BC%95%E6%93%8E%E5%9D%97.png" class="" title="图3-30-使用默认强度范围分区查看引擎块">
<p><em>图3.30</em>：使用默认强度范围分区查看引擎块。</p>
<ul>
<li>在<code>Project View</code>中选择<code>Volume Rendering</code>模块，然后在<code>Properties</code>面板中查看其颜色图端口。（请参阅图3.31）。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-31-%E2%80%9C%E4%BD%93%E7%A7%AF%E6%B8%B2%E6%9F%93%E5%B1%9E%E6%80%A7%E2%80%9D%E9%9D%A2%E6%9D%BF.png" class="" title="图3-31-“体积渲染属性”面板">
<p><em>图3.31</em>：“体积渲染属性”面板。</p>
<ul>
<li>更改颜色图端口中的最小边界：根据以下步骤调整<code>Volume Rendering</code>。<em>提示</em>：使用虚拟滑块连续更改值：按住<code>Shift</code>键的同时您单击并在数字文本字段中拖动鼠标。</li>
</ul>
<p><code>Intensity Range Partitioning</code>旨在提供与某些强度范围匹配的预设。这个范围可以轻松选择以显示给定的数据集。Avizo可以自动猜测阈值分离通过分析输入的强度分布直方图来确定不同密度的相或材料数据。在上面的示例中，Avizo确定了将空隙和固体分开的最佳阈值。</p>
<ul>
<li>在<code>Project View</code>中选择数据对象<code>motor.am</code>，然后在<code>Properties</code>面板中查看数据信息。（请参阅图3.32）</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-32-%E6%95%B0%E6%8D%AE%E4%BF%A1%E6%81%AF%E4%B8%AD%E7%9A%84%E5%BC%BA%E5%BA%A6%E8%8C%83%E5%9B%B4%E5%88%86%E5%8C%BA.png" class="" title="图3-32-数据信息中的强度范围分区">
<p><em>图3.32</em>：数据信息中的强度范围分区。</p>
<p>您可以看到：数据强度的实际<code>min-max</code>，定义强度边界的<code>data window</code>体积渲染的颜色图端口隐藏和使用的外观，以及为此数据定义的范围。</p>
<ul>
<li>通过单击其切换按钮（带有直方图）来调用<code>Intensity Range Partitioning editor</code>标尺符号在<code>Properties</code>面板中的数据标题旁边，如下所示。您可以看到定义的数据集的范围（请参见图3.33）。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-33-%E5%BC%BA%E5%BA%A6%E8%8C%83%E5%9B%B4%E5%88%86%E5%8C%BA%E7%BC%96%E8%BE%91%E5%99%A8.png" class="" title="图3-33-强度范围分区编辑器">
<p><em>图3.33</em>：强度范围分区编辑器。</p>
<ul>
<li>按<code>Show range distribution</code>按钮以显示数据直方图，此处分为两部分区域/范围如图3.34所示。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-34-1-%E5%BC%BA%E5%BA%A6%E8%8C%83%E5%9B%B4%E5%88%86%E5%8C%BA%E7%9B%B4%E6%96%B9%E5%9B%BE.png" class="" title="图3-34-1-强度范围分区直方图">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-34-2-%E5%BC%BA%E5%BA%A6%E8%8C%83%E5%9B%B4%E5%88%86%E5%8C%BA%E7%9B%B4%E6%96%B9%E5%9B%BE.png" class="" title="图3-34-2-强度范围分区直方图">
<p><em>图3.34</em>：强度范围分区直方图。</p>
<p>如您所见，在直方图的局部最小值处可以找到相/材料之间的间隔。</p>
<p><em>提示</em>：其他工具可用于自动确定阈值。请参阅<code>Auto Thresholding</code>模块。<br><em>注意</em>：<code>Intensity Range Partitioning</code>有助于使可视化更加容易。为了达到理想的质量有关感兴趣特征的图像，足以进行定量分析。为了识别不同相/材料的速率，特别是具有噪声，<code>image filtering and segmentation</code>或可能需要伪像，图像过滤和分割工具。有关更多信息，请参见下一章图像分割。</p>
<p>实际上，在此示例中使用的发动机缸体至少由两种材料构成，这些材料存在明显差异入射密度和X射线吸收：铝和钢插件。</p>
<p>修改强度范围分区，如下所示：</p>
<ul>
<li>将范围数设置为3，然后按检测。您可以看到一个新的滑块端口和一个更新的具有新区域/范围的直方图，如图3.35所示。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-35-3%E4%B8%AA%E5%BC%BA%E5%BA%A6%E8%8C%83%E5%9B%B4%E7%9A%84%E7%9B%B4%E6%96%B9%E5%9B%BE.png" class="" title="图3-35-3个强度范围的直方图">
<p><em>图3.35</em>：3个强度范围的直方图。</p>
<ul>
<li>在Ranges港口更改名称：外部铝钢</li>
<li>将“铝”设置为<code>Exterior range</code>：它将从上面定义的<code>data window</code>中排除，并且用作显示模块的默认边界。默认情况下设置了第一个名为<code>Exterior</code>的范围作为外部范围。</li>
<li>按<code>Properties</code>面板底部的<code>Apply</code>按钮。<code>data info</code>和编辑器应为更新如图3.36所示。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-36-%E4%BF%AE%E6%94%B9%E5%BC%BA%E5%BA%A6%E8%8C%83%E5%9B%B4%E5%88%86%E5%8C%BA.png" class="" title="图3-36-修改强度范围分区">
<p><em>图3.36</em>：修改强度范围分区。</p>
<ul>
<li>现在，您可以通过再次单击<code>Intensity Range Partitioning</code>编辑器开关来关闭编辑器按钮。</li>
<li>从当前项目中删除<code>Volume Rendering</code>模块：选择<code>Volume Rendering Settings</code>模块；按Delete键或将图标拖到<code>Project</code>视图中的垃圾箱。</li>
<li>再次将<code>Volume Rendering</code>模块附加到数据：铝部件现在已隐藏，如图3.37所示，仅留下较高密度的钢可见。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-37-%E6%95%B0%E6%8D%AE%E7%AA%97%E5%8F%A3%E7%8E%B0%E5%9C%A8%E9%80%89%E6%8B%A9%E9%AB%98%E5%AF%86%E5%BA%A6%E6%9D%90%E6%96%99.png" class="" title="图3-37-数据窗口现在选择高密度材料">
<p><em>图3.37</em>：数据窗口现在选择高密度材料。</p>
<ul>
<li>在<code>Volume Rendering</code>模块的颜色图端口中，您可以按<code>Edit</code>按钮或向右在阴影区域中单击以在菜单中选择特定范围：整个数据（最小-最大），数据不包括外部范围或定义的特定范围的窗口（请参见图3.38）。例如，选择铝将恢复整个块。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-38-%E5%9C%A8%E9%A2%9C%E8%89%B2%E5%9B%BE%E7%AB%AF%E5%8F%A3%E4%B8%AD%E8%B0%83%E6%95%B4%E8%8C%83%E5%9B%B4.png" class="" title="图3-38-在颜色图端口中调整范围">
<p><em>图3.38</em>：在颜色图端口中调整范围。</p>
<p><em>更多提示</em>：</p>
<ul>
<li>如果愿意，可以在<code>Preferences</code>中禁用<code>Intensity Range Partitioning</code>以获取行为是先前Avizo版本的版本，并且使用默认范围来设置数据的最小-最大（或数据窗口，如果定义为数据参数）。</li>
<li>您可以使用首选项来设置要在数据中检测到的多个阶段/材料。请记住，检测依赖于图像直方图的形状。Avizo可以自动猜测可能会检测到的范围数，但是如果Avizo可以覆盖它找不到预期的范围。</li>
<li>所有使用颜色图或范围滑块端口（例如<code>Isosurface</code>）的模块都可以利用<code>Intensity Range Partitioning</code>。</li>
<li><em>提示</em>：保存您的数据时，数据窗口和范围被定义为持久数据参数数据转换为Avizo格式（请参见第10.2.7节”数据参数”）。</li>
</ul>
<h2 id="3-5-3D图像分割"><a href="#3-5-3D图像分割" class="headerlink" title="3.5 3D图像分割"></a>3.5 3D图像分割</h2><p>通过遵循此分步教程，您将学习如何以交互方式创建细分3D图像。分割为图像的每个像素分配一个标签，该标签描述了区域或与像素关联的材料（例如，材料1或材料2）。细分存储在一个单独的数据对象，称为<code>Label Field</code>。分割是曲面模型的前提生成和精确定量（例如体积测量）。</p>
<p><code>Segmentation Editor</code>是一个工作室，可为交互式段提供专用的用户界面，处理任务。分割数据时，您可以在分割室和其他工作室之间切换您可以随时单击<code>Workroom Toolbar</code>工具栏中的相应标签。</p>
<p>取决于输入内容，细分过程可以是自动，半自动或交互式的图片和所需结果。</p>
<p>本教程介绍了每种方法，并包括以下步骤：</p>
<ul>
<li>创建一个空的<code>Label Field</code>。</li>
<li>在<code>Image Segmentation Editor</code>中交互式编辑标签。</li>
<li>测量分段结构的体积。</li>
<li>一种称为阈值分段的替代分段方法。</li>
<li>有关细分的更多提示。</li>
</ul>
<h3 id="3-5-1-交互式图像分割"><a href="#3-5-1-交互式图像分割" class="headerlink" title="3.5.1 交互式图像分割"></a>3.5.1 交互式图像分割</h3><ul>
<li>从目录<code>data/tutorials</code>中加载文件<code>motor.am</code>。</li>
<li>右键单击绿色图标，然后从<code>Image Segmentation</code>选择<code>Edit New Label Field</code>。</li>
</ul>
<p>这将自动启动细分工作室，从而替换<code>Project View</code>和左侧的<code>Properties</code>面板，右侧的3D查看器。同时且当前不可见，一个新的数据对象将被添加到<code>Project View</code>中，以保存细分结果。这是要保存的数据对象。默认情况下，<code>Segmentation Editor</code>在四视图模式下运行。在此模式下，将显示具有XY，XZ和YZ方向的三层查看器以及一个3D视图。另外，也可以使用单视图或两视图布局。在两个查看器的布局中（水平在单查看器模式下，将切片查看器与3D查看器结合使用（堆叠或并排）显示图像的一个（XY）切片。您可以通过选择以下任一方法来更改切片的方向从<code>Segmentation / Orientation</code>菜单中选择另一个方向，或者在查看器工具栏多次以循环显示不同的2D视图（XY，XZ和YZ）和3D视图。</p>
<p><code>Segmentation Editor</code>的工具显示在<code>Project View</code>和<code>Properties Area</code>中区域正常显示。</p>
<ul>
<li>单击查看器工具栏中的“四个查看器”，切换到四查看器布局。</li>
<li>在XY视图中，使用底部的滑块滚动切片。转到第30条，您将看到六个明亮的结构。</li>
<li>如有必要，单击与查看器右上角的<code>Zoom Tool</code>关联的-整个切片的视图。</li>
<li>单击<code>Segmentation Editor</code>主面板的<code>Tools</code>区域中的画笔图标。</li>
<li>用鼠标标记其中一个结构。如果出现以下情况，请按住<code>CTRL</code>键取消选择不正确的像素必要。</li>
<li>完成后，在<code>Materials</code>列表中选择<code>Inside</code>。然后在<code>Selection</code>组中单击<code>+</code>。</li>
</ul>
<p>现在将先前选择的像素分配给材质<code>Inside</code>。右键单击材料中的<code>Inside</code>以选择其他绘制样式（例如，虚线）。</p>
<ul>
<li>单击<code>Materials</code>列表，然后从右键菜单中选择<code>New Material</code>。</li>
<li>使用画笔标记第二个结构，在<code>Materials</code>列表中选择新材料，然后分配该结构的像素（请参见图3.39）。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-39-%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E5%88%87%E7%89%87%E9%80%89%E6%8B%A9%E4%B8%A4%E4%B8%AA%E7%BB%93%E6%9E%84.png" class="" title="图3-39-使用一个切片选择两个结构">
<p><em>图3.39</em>：使用一个切片选择两个结构。</p>
<ul>
<li>转到第31条，并通过分割相同的两个结构进行练习。</li>
</ul>
<p><em>提示</em>：如果您希望使用一个大视图而不是四个小视图，请在查看器工具栏。要循环浏览四个视图中的每个视图，请重复单击<code>Single Viewer</code>。回来到四查看器模式，请单击<code>Four Viewers</code>。</p>
<p>如果切片之间的变化很小，请使用插值。</p>
<ul>
<li>转到切片30，并使用画笔标记右上角的结构。转到切片35并标记相同的结构。</li>
<li>从菜单栏中选择：<code>Selection/Interpolate</code>。</li>
<li>滚动浏览数据集。您将看到现在也选择了切片30到35。</li>
<li>要将所有切片的选定像素分配给<code>Inside</code>，请在<code>Materials</code>列表中选择它，然后在选择组中单击<code>+</code>。</li>
<li>在片段35和45之间重复该过程。</li>
<li>对左侧结构之一重复该过程。</li>
</ul>
<p>提示：</p>
<ul>
<li>分割时，建议您经常保存分割结果。去做因此，通过在<code>Workroom Toolbar</code>中单击<code>Project</code>切换到<code>Project View</code>。然后选择图标，然后从<code>Avizo File</code>菜单中选择<code>Save Data As...</code>或<code>Export Data As...</code>。在工作间工具栏中单击细分，以返回到<code>Segmentation Editor</code>工作室。</li>
<li><code>Brush Tool</code>可能是最基本的细分工具。可以注意到，编辑器提供了<code>Segmentation Editor</code>帮助页面上介绍的其他工具和功能。</li>
<li>有一些有用的键盘快捷键，包括<code>+</code>（<code>-</code>）可将选择添加（移除）到（从）material，<code>SPACE</code>和<code>BACKSPACE</code>更改切片编号，而<code>d</code>更改材料绘画风格。</li>
<li>您可能想给材料赋予更有意义的名称或不同的颜色。为此，请单击材料名称并输入新名称，或双击名称左侧的颜色按钮然后在<code>Color Dialog</code>中选择其他颜色。</li>
</ul>
<h3 id="3-5-2-数量统计统计"><a href="#3-5-2-数量统计统计" class="headerlink" title="3.5.2 数量统计统计"></a>3.5.2 数量统计统计</h3><p>分割结构后，您可以轻松地测量其体积：</p>
<ul>
<li>在主菜单中，选择<code>Segmentation/Material Statistics ....</code>。</li>
</ul>
<p>对话框中会出现一个表格，列出每种材料的体积。<br><code>Project</code>工作室的<code>Tables</code>面板中提供了相同的统计信息。</p>
<ul>
<li>通过单击工作室工具栏上的<code>Project</code>来激活<code>Project View</code>。</li>
<li>右键单击标签图像的图标，然后选择<code>Measure and Analyze/Material Statistics ...</code>。</li>
<li>单击<code>Material Statistics</code>下的<code>Apply</code>以创建一个<code>motor.MaterialStatistics</code>。在<code>Project View</code>。</li>
<li>选择此对象，然后单击<code>Show</code>。</li>
</ul>
<p>应用程序窗口中的新面板显示了类似的表格。<code>* .MaterialStatistics</code>对象可以保存为文本（<code>* .txt</code>），逗号分隔值文件（<code>* .csv</code>）或Micrsosoft XML电子表格（<code>* .xml</code>）。</p>
<p><em>注意</em>：如果单位管理（请参见<code>Edit/Preferences/Units</code>）已关闭，则值的物理单位体积列中的对象是隐式的，体素大小仅在此隐式物理范围内缩放对象单元。列标题中未显示物理单位。对于<code>motor.am</code>，体素大小为在<code>m</code>因此，“体积”列中给出的数字必须读为<code>m^3</code>。如果<code>Units Management</code>是打开时，指定为<code>Display units</code>的物理单位显示在列标题中。</p>
<h3 id="3-5-3-阈值分割"><a href="#3-5-3-阈值分割" class="headerlink" title="3.5.3 阈值分割"></a>3.5.3 阈值分割</h3><p>本节介绍了一种细分方法，该方法可能需要较少的手动交互，但通常需要更高质量的图像。除了优化图像采集流程之外，这也可以通过在执行分割之前对图像进行滤波来实现。欠佳条件下，仅基于的灰度值就可以自动实现令人满意的分割图像数据。</p>
<p>第一步是将对象与背景分离。通过将体素分类为基于强度和体素值的前景和背景体素。</p>
<ul>
<li>通过从主菜单中选择<code>Project/Remove All Objects</code>，清除<code>Project View</code>区域。</li>
<li>从<code>data/tutorials</code>目录中加载<code>motor.am</code>数据记录。</li>
<li>将<code>Image Segmentation/Multi-Thresholding</code>模块连接到数据图标并选择它。</li>
<li>在端口<code>Exterior-Range1</code>的文本字段中键入85。您还可以确定其他阈值，如<code>Image Data Visualization</code>教程中所述将旧外观与内部分开。</li>
<li>单击<code>Apply</code>。</li>
</ul>
<p>通过此过程，将每个低于阈值的体素值分配给<code>Exterior</code>，并将每个体素大于或等于阈值的值将分配给<code>Inside</code>。但是，这可能会导致体素标记的对象不属于对象，但体素值高于阈值。设置<code>remove couch</code>选项来抑制它，以确保仅将最大的相干区域标记为前景（<code>Inside</code>）和所有其他体素都分配给背景（<code>Exterior</code>）。</p>
<p>单击<code>Apply</code>创建一个新的数据对象<code>motor.labels</code>。该数据对象是一个<code>Label Field</code>，具有相同的尺寸为<code>motor.am</code>，并根据每个像素包含<code>Range1 or Exterior</code>标签细分结果。</p>
<h3 id="3-5-4-细化阈值分割结果"><a href="#3-5-4-细化阈值分割结果" class="headerlink" title="3.5.4 细化阈值分割结果"></a>3.5.4 细化阈值分割结果</h3><p>您可以使用Avizo的细分编辑器来可视化并交互式地编辑标签字段。使用分段编辑器可平滑数据以消除对象表面的噪声。</p>
<ul>
<li>选择<code>motor.labels</code>图标，然后在<code>Properties</code>区域中单击<code>Segmentation Editor</code>。</li>
</ul>
<p>这会自动激活<code>Segmentation Editor</code>工作室。</p>
<ul>
<li>在YZ视图中，使用底部的滑块选择切片206（请参见图3.40）。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-40-%E5%88%86%E6%AE%B5CT%E6%89%AB%E6%8F%8F%E6%95%B0%E6%8D%AE.png" class="" title="图3-40-分段CT扫描数据">
<p><em>图3.40</em>：分段CT扫描数据。</p>
<ul>
<li>通过单击缩放工具（最后一个工具中的+或-按钮）选择合适的放大倍率。工具区域）。</li>
</ul>
<p>图像分割编辑器显示要分割的图像数据（<code>motor.am</code>）以及灰色Mos中包含的<code>Ranges1</code>和<code>Exterior</code>区域之间的边界的轮廓<code>tor.labels</code>数据对象。如您所见，边界不平坦，周围有小岛通过青色的轮廓。这就是我们现在要改进的地方。</p>
<ul>
<li>从<code>Segmentation</code>菜单中选择<code>Remove Islands...</code>。作为响应，将出现一个对话框。</li>
<li>在对话框中，选择<code>All slices</code>模式。然后点击突出<code>Highlight all islands</code>以突出显示所有小于或等于15个体素的岛。</li>
<li>单击<code>Apply</code>将所有孤岛与其嵌入的材料合并。</li>
<li>然后单击<code>Close</code>以关闭<code>Islands Filter</code>窗口。</li>
<li>要进一步清理图像，请从<code>Segmentation</code>菜单中选择<code>Smooth Labels...</code>。另一个对话框出现。</li>
<li>选择<code>3D volume</code>模式，然后单击<code>Apply</code>以执行平滑操作。</li>
<li>单击<code>Close</code>按钮以关闭<code>Smooth Labels</code>窗口。</li>
<li>要检查过滤器操作的结果，请逐个标签浏览标签图像。在除了切片滑块外，您还可以使用<code>cursor-up</code>和<code>cursor-down</code>光标键。</li>
<li>使用工作室工具栏返回到<code>Project View</code>。</li>
</ul>
<h3 id="3-5-5-有关细分的更多提示"><a href="#3-5-5-有关细分的更多提示" class="headerlink" title="3.5.5 有关细分的更多提示"></a>3.5.5 有关细分的更多提示</h3><p>Avizo包括可以创建标签图像的不同工具。</p>
<ul>
<li><code>Image Segmentation/Multi-Thresholding</code>。该模块通过以下方式自动创建标签图像阈值化。另请参见<code>Segmentation Editor</code>中的<code>Selection/Threshold</code>菜单。</li>
<li><code>Image Segmentation/Edit New Label Field</code>。细分编辑器提供了自动，半自动和交互式工具。</li>
<li><code>Compute/Connected Components</code>。该模块搜索连接的区域。</li>
<li><code>Image Segmentation/Correlation Histogram</code>。此模块可以根据相关信息创建标签图像通常在配准后，在两个图像集中设置一个区域。</li>
<li><code>Image Segmentation/Interactive Thresholding</code>以及Avizo的其他工具。此扩展提供了先进的定量工具，包括对象分离和标记。参阅<code>Advanced Image Processing</code>，<code>Segmentation</code>和<code>Analysis tutorials</code>。</li>
</ul>
<p>在进行分割之前，请考虑使用以下方法提高图像质量并减少数据集中的噪声：</p>
<ul>
<li><code>Volume Edit</code>模块</li>
<li><code>Visualizing and Processing 2D and 3D Images</code>教程，其中提供了进一步的滤镜和工具。</li>
</ul>
<p>以下是有关细分编辑器的一些提示。</p>
<ul>
<li>组合不同的工具。切记适当地切换2D / 3D。</li>
<li>调整<code>Display Control</code>设置。</li>
<li>使用细分过滤器<code>Smooth labels/Fill holes/Remove islands</code>。</li>
<li>使用<code>Selection/Invert</code>（’I’键）并将选择合并为材料（<code>replace/add/subtract</code>）。</li>
<li>在片段之间使用插值（<code>Selection/Interpolate</code>菜单）。</li>
<li>使用四个查看器可以使分割过程更容易。</li>
<li>您可以在所有查看器（包括3D查看器）中从选择视图中删除错误的零件。</li>
<li>切记锁定材料，以防止错误转移先前选择的材料。</li>
<li>锁定的材料可用作面罩。这对于3D操作很有用，可防止在您不想添加到材料中的区域。也可以使用此过程，使魔术棒工具仅在指定的切片之间起作用。</li>
<li>如果要选择多种材料，请按住<code>SHIFT</code>键并选择所需的材料从材料列表中。如果您选中了<code>Show in 3D</code>复选框，那么您还将获得一个3D选择。</li>
<li>如果要将相同选择复制到相邻切片，请按住<code>SHIFT</code>并按<code>up</code>/<code>down</code>箭头。</li>
<li>在<code>Selection</code>区域中使用标签显示当前选择的状态。这个标签可以显示三种不同的消息：<code>No selection</code>, <code>Active selection</code>, 和 <code>Hidden selection</code>。最后两个状态指示平面选择是显示在2D查看器之一中还是位于在不同的切片中。</li>
<li><code>Masking</code>功能允许用户通过设置其范围和可见性来控制遮罩在2D/3D查看器中，并在某些工具中启用/禁用它。此<code>Masking</code>功能是可选的<code>Brush</code>和<code>Lasso</code>工具，并在<code>Magic Wand</code>，<code>Threshold</code>和<code>TopHat</code>工具。</li>
<li><code>TopHat</code>工具在组合阈值以分割低对比度或较薄时非常有用在非均匀背景下的功能。</li>
<li><code>Segmentation Editor</code>还有其他有用的键盘快捷键<code>keyboard shortcuts</code>。</li>
</ul>
<p>在<code>Watershed Segmentation</code>中可以找到使用<code>Watershed</code>工具进行的高级细分教程。</p>
<h2 id="3-6-用于光学显微镜的反卷积"><a href="#3-6-用于光学显微镜的反卷积" class="headerlink" title="3.6 用于光学显微镜的反卷积"></a>3.6 用于光学显微镜的反卷积</h2><p>Avizo的反卷积模块提供了功能强大的算法，可提高Avizo的质量由3D广角和共聚焦显微镜记录的显微图像。两种不同的方法支持，即基于迭代的所谓非盲和盲反卷积方法最大似然图像复原。在第一种情况下，测量或计算的点扩散函数（PSF）是必需的。在第二种情况下，将估计PSF以及数据本身。</p>
<p>反卷积文档的组织如下：</p>
<ul>
<li>关于图像反卷积的一般性评论</li>
<li>数据采集和采样率</li>
<li>标准反卷积教程</li>
<li>盲反卷积教程</li>
<li>珠子提取教程</li>
<li>性能问题和多处理</li>
</ul>
<p>提供以下模块：</p>
<ul>
<li>提取点扩散功能-从磁珠测量中获得PSF</li>
<li>卷积-卷积两个3D图像</li>
<li>正确的Z下降-校正z方向上的衰减</li>
<li>校正背景和平面场-校正背景和平面场</li>
<li>反卷积-实际的反卷积前端</li>
<li>傅立叶变换-计算FFT和功率谱</li>
<li>生成点扩散函数-计算理论PSF</li>
</ul>
<p>例子：</p>
<ul>
<li>共聚焦数据集</li>
<li>广角数据集</li>
</ul>
<h3 id="3-6-1-关于图像反卷积的一般说明"><a href="#3-6-1-关于图像反卷积的一般说明" class="headerlink" title="3.6.1 关于图像反卷积的一般说明"></a>3.6.1 关于图像反卷积的一般说明</h3><p>反卷积是一种用于去除通过光学记录的一系列图像中的散焦光的技术切片显微镜。旨在研究3D生物物体，光学切片显微镜通过创建荧光物体的多个图像（光学部分）来工作，每个图像具有不同的图像聚焦平面。但是，除了焦点对准的结构外，图像通常还包含焦点对准的区域物体其他部分的光线会引起雾霾和严重的轴向模糊。甚至对于共聚焦激光扫描显微镜，其中大部分散焦光从图像中去除通过针孔系统。从数学上讲，可以描述任何显微系统产生的图像作为样本的理想无模糊图像和显微镜的所谓点的卷积扩散函数（PSF），即理想点光源的图像。与这个过程相反，称为反卷积，只要点扩散，就可以获得标本的去模糊图像函数是已知的，或者至少可以估计。</p>
<p>Avizo解卷积模块主要提供了两种强大的迭代最大卷积算法，似然图像恢复算法，即非盲人和盲人。区别在于它们之间的区别是，在第一种情况下，使用测量或计算的点扩展函数，而在第二种情况，PSF与数据本身一起估算。最大似然图像复原可以被视为3D光学截面反卷积的事实上的标准。虽然从计算方面上讲来说，该方法很昂贵，能够显着提高图像质量。在同一时间时间，它对于噪声伪像非常鲁棒且不敏感。但是，应注意的是，尽管可以拒绝大部分散焦光，但绝不能将其全部拒绝。因此，一些图像中残留明显的雾度。此外，图像在z方向，无法通过任何反卷积算法删除。</p>
<p>乍一看，人们可能会想为什么非盲和反卷积反卷积算法都可以提供; 盲反卷积似乎更通用，因为PSF是自动计算的。一答案是盲反卷积在计算上比非盲迭代还要昂贵最大似然图像复原。另一个答案是在盲反卷积算法中，仅在施加严格约束的情况下，才能计算出PSF的有意义的估算值。例如，盲反卷积问题的简单解决方案将是与输入相同的图像图像和具有理想增量峰形状的PSF。显然，此解决方案根本没有用。因此，例如，如果要对共聚焦数据进行反卷积，则算法将实际的PSF拟合为它看起来像共焦显微镜可能测量的PSF。更确切地说，拟合度为限制与实验参数（介质的折射率，物镜的数值孔径和体素大小）。有时这可能导致错误的结果，例如，当显微镜的共焦针孔孔径没有足够减小时在共聚焦图像采集过程中，在这种情况下，显微镜的行为实际上并不像真实的共聚焦显微镜。事实上，您应该尝试提供最佳结果的方法对于您自己的图像数据，可通过实测或实测进行盲解卷积或非盲解卷积自动计算的PSF。</p>
<h3 id="3-6-2-数据采集和采样率"><a href="#3-6-2-数据采集和采样率" class="headerlink" title="3.6.2 数据采集和采样率"></a>3.6.2 数据采集和采样率</h3><p>为了在对显微图像进行反卷积时获得最佳质量，一些基本准则图像采集过程中应遵守。即使这些指南中的某些指南能够获得良好的结果，没有严格遵循规则，但总的来说，获得满意结果的机会会增加。</p>
<p>下面我们讨论最重要的建议。</p>
<p><strong>调整扫描图像量</strong></p>
<p>感兴趣的区域应位于图像体积的中间，因为显微镜通常在该区域具有最小的像差，这有助于避免可能的边界在反卷积过程中可能会出现伪影。特别是对于宽数据重要的是要记录实际样本下方和上方足够大（最好是空白）的区域。理想情况下，该区域应与样品本身一样大。例如，如果样本覆盖100<br>z方向的微米范围内，扫描图像的体积应在50微米以下样品至其上方50微米处。</p>
<p><strong>选择正确的采样率</strong></p>
<p>采样率取决于x和y方向上的像素大小以及距离两个后续光学部分之间的距离，均以微米为单位。一般来说，图像如果数据明显过采样，即像素或光学部分空间不清晰，则反卷积效果最佳。小于要求。最大所需采样距离（奈奎斯特采样，在 R. Heintzmann. Band-limit and appropriate sampling in microscopy, chapter 3, Vol. III, in: CellBiology: A Laboratory Handbook, Julio E. Celis (ed.), Elsevier Academic Press, 29-36, 2006）数据中的歧义可以从傅里叶空间屈服的考虑中获得</p>
<script type="math/tex; mode=display">d_{xy} = \frac{λ}{4NA}</script><p>其中<code>λ</code>代表波长，<code>NA</code>代表显微镜的数值孔径。类似的想法对于相邻图像平面之间的最大距离，会产生以下结果：</p>
<script type="math/tex; mode=display">d_{z} = \frac{λ}{2n(1-cos(α))}</script><p>其中n表示目标介质的折射率，α表示确定的孔径半角由NA = n sin（α）。</p>
<p>对于共聚焦显微镜，面内采样距离和轴向采样距离都需要从理论上讲大约要小2倍。但是，对于大多数人来说，此要求过于严格在实际情况下，甚至在宽视场情况下，通常也可以满足上述要求足够。</p>
<p>光学部分的总数是通过将图像体积的高度除以取样贴合距离<script type="math/tex">d_{z}</script>。应当指出，如果采样距离为不严格匹配，但是匹配它们可以提高获得良好结果的机会。一般而言，对对象进行采样比对对象进行欠采样所造成的危害要小，但有一个例外：在共聚焦的情况下数据，如果盲反卷积，则采样距离<script type="math/tex">d_{xy}</script>不应比所示的小很多，算法或非盲反卷积算法以及理论上计算出的共焦使用PSF。否则，无约束的最大似然算法和数据中的噪声可能会导致结果不令人满意。</p>
<p><strong>黑电平和饱和度</strong></p>
<p>在从显微镜的相机上获取图像之前，应在以下条件下调节光强度：这样可以避免黑色或白色的饱和像素。饱和像素是指钳制为黑色或白色，因为它们的实际强度值不在能被描绘的强度。在任何情况下，饱和都意味着信息丢失，因此妨碍了后处理或反卷积。同时，应避免高背景水平会降低成像系统的动态范围，反卷积效果会更差。这个表示未显示任何荧光的空白区域应显示为几乎黑色。背景当执行磁珠测量以提取出一个零点时，接近零的水平尤其重要。实验点扩散函数。讨论的细节是有关磁珠提取的单独教程。</p>
<h3 id="3-6-3-标准反卷积教程Standard-Deconvolution"><a href="#3-6-3-标准反卷积教程Standard-Deconvolution" class="headerlink" title="3.6.3 标准反卷积教程Standard Deconvolution"></a>3.6.3 标准反卷积教程<code>Standard Deconvolution</code></h3><p>本教程说明了如何在Avizo中对3D图像数据集进行反卷积。假设读者已经熟悉Avizo本身的基本概念。如果不是这种情况，则强烈建议先阅读标准的Avizo教程。在本节中，以下主题被覆盖的：</p>
<pre><code>1.反卷积的前提
2.重新采样测得的PSF
3.对图像数据集进行反卷积
4.计算理论PSF
</code></pre><p>例如，我们将使用Avizo提供的共聚焦测试数据集（polytrichum.am）反卷积模块。数据文件位于目录<code>AVIZO ROOT/data/deconv</code>中。</p>
<ul>
<li>加载数据集<code>polytrichum.am</code>。</li>
<li>例如使用“图像正交投影”模块对其进行可视化。</li>
</ul>
<p>数据集显示了苔藓植物群落的孢子中的四个叶绿体。</p>
<p><strong>反卷积的先决条件</strong></p>
<p>除了图像数据本身，对于标准的非盲反卷积算法，所谓的<code>pointspread function (PSF)</code>还需要扩展功能。PSF是单点光源的图像，也可以是闭合图像近似，单个发荧光的亚分辨率球的图像。PSF图像可以是根据理论计算得出（请参阅下文），也可以通过测量获得。在后一种情况下，微小<br>在与实际物体相同的条件下记录所谓的珠子。这意味着相同使用相同的物镜，相同的染料和波长以及相同的浸没介质。通常，对多个珠的图像进行平均以获得单个PSF的估计值。Avizo提供了一个模块称为<code>Extract Point Spread Function</code>简化此过程。该模块的使用将在有关珠提取的单独教程。此时，让我们简单地从文件中加载测得的PSF。</p>
<ul>
<li>加载数据集polytrichum-psf.am。</li>
<li>使用<code>Image Ortho Projections</code>模块将其可视化。</li>
</ul>
<p>PSF显示为位于图像体积中间的亮点（图3.41）。它是PSF准确居中很重要。否则，反卷积数据集将偏移尊重原始图像。同样重要的是，PSF在边界处淡出为黑色。如果情况并非如此，需要使用算术模块调整PSF图像的黑电平。最后，无论是PSF还是要进行反卷积的图像都不应显示强度衰减伪影，即，由于其他切片中过多的光吸收而导致平均强度降低的图像切片。如果如果存在此类伪影，则可以使用<code>Correct Z Drop</code>模块将其删除。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-41-1-Polytrichum-psf.am%E7%9A%84%E6%9C%80%E5%A4%A7%E5%BC%BA%E5%BA%A6%E6%8A%95%E5%BD%B1.png" class="" title="图3-41-1-Polytrichum-psf.am的最大强度投影">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-41-2-Polytrichum-psf.am%E7%9A%84%E6%9C%80%E5%A4%A7%E5%BC%BA%E5%BA%A6%E6%8A%95%E5%BD%B1.png" class="" title="图3-41-2-Polytrichum-psf.am的最大强度投影">
<p><em>图3-41</em>:Polytrichum-psf.am的最大强度投影。</p>
<p><strong>重测测得的PSF</strong></p>
<p>接下来，选择PSF和图像数据。您会注意到两个对象的体素大小都不相同。建议在反卷积之前调整PSF和图像数据的不同体素大小使用<code>Resample</code>模块进行稀释。反卷积模块本身也考虑了不同的体素大小，但它是通过使用具有三线性插值的点采样来实现的。只要可以PSF的体素尺寸大于图像数据的体素尺寸。但是，在我们的案例中，PSF小于图像数据的PSF，即PSF的分辨率更高。使用<code>Resample</code>模块在这里提供了更准确的结果，因为所有样本将使用Lanczos内核。</p>
<ul>
<li>将<code>Resample</code>模块连接到<code>polytrichum-psf.am</code>。</li>
<li>将<code>Resample</code>模块的<code>Reference</code>端口连接到图像数据集<code>polytrichum.am</code>。</li>
<li>在<code>Resample</code>模块的<code>Mode</code>端口中，选择<code>voxel size</code>（见图3.42）。</li>
<li>通过按<code>Apply</code>按钮重新采样PSF。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-42-1-Polytrichum-psf.am%E7%9A%84%E6%9C%80%E5%A4%A7%E5%BC%BA%E5%BA%A6%E6%8A%95%E5%BD%B1.png" class="" title="图3-42-1-Polytrichum-psf.am的最大强度投影">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-42-2-Polytrichum-psf.am%E7%9A%84%E6%9C%80%E5%A4%A7%E5%BC%BA%E5%BA%A6%E6%8A%95%E5%BD%B1.png" class="" title="图3-42-2-Polytrichum-psf.am的最大强度投影">
<p><em>图3.42</em>：Polytrichum-psf.am的最大强度投影</p>
<p><code>voxel size</code>选项意味着PSF将在具有完全相同的体素的网格上重新采样size作为连接到<code>Reference</code>端口的图像数据集。而原始的PSF有一个分辨率为12 x 12 x 30体素，重新采样的像素只有12 x 12 x 16体素。但是，程度现在，z方向上的单个体素的像素更大。</p>
<p><strong>解卷积图像数据集</strong></p>
<p>获得合适的PSF后，我们准备对图像数据集进行反卷积。这可以是通过将反卷积模块附加到图像数据来完成此操作。</p>
<ul>
<li>将<code>Deconvolution</code>模块连接到<code>polytrichum.am</code>。</li>
<li>将<code>Deconvolution</code>模块的<code>PSF Kernel</code>端口连接到重新采样的PSF<code>polytrichumpsf.Resampled</code>。PSF内核端口在模块属性的<code>Microscope</code>部分中。</li>
</ul>
<p>一旦解卷积模块连接到其两个输入对象，则需要一些其他参数进行调整（有关这些参数的详细讨论，请参见反卷积参考解卷积模块本身的文档）。图3.43显示了项目视图。设定用于反卷积模块：</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-43-%E8%BF%9E%E6%8E%A5%E5%88%B0polytrichum.am%E7%9A%84Deconvolution%E6%A8%A1%E5%9D%97.png" class="" title="图3-43-连接到polytrichum.am的Deconvolution模块">
<p><em>图3.43</em>：连接到polytrichum.am的Deconvolution(反卷积)模块。</p>
<p><code>Border width</code>边界宽度：为了进行反卷积，必须通过保护带区域来放大图像数据。除此以外，<br>可能会出现边界伪影，即，可以将来自数据一侧的信息传递到另一侧。无需使边界大于PSF的大小。但是，如果数据集在边界，较小的边框宽度就足够了。在本例中，让我们选择边框值0、0，以及在x，y和z方向上为8。<br><code>Iterations</code>迭代次数：反卷积算法的迭代次数。让我们在这里选择20的值。<br><code>Initial estimate</code>初始估计：指定反卷积算法的初始估计。如果选择<code>const</code>，则最初使用恒定图像。这是最可靠的选择，即使输入也能产生良好的结果数据很吵。我们在此保留此选项。<br><code>Overrelaxation</code>过松弛：过松弛是一种加速迭代去卷积收敛的技术净化过程。在大多数情况下，速度和质量之间的最佳折衷是固定的过松弛。因此，我们也保留此选择。<br><code>Method</code>方法：在标准（非盲）和盲反卷积之间进行选择。让我们指定标准选项在这里。</p>
<p>实际的反卷积过程通过按<code>Apply</code>按钮开始。请现在按此按钮。在现代计算机上，解卷积大约需要10秒钟。在反卷积期间，进度条将通知您有关操作状态的信息。另外，每次迭代之后，都会有一条消息在Avizo控制台窗口中打印，指示数据更改的数量。如果改变似乎足够小，您可以按“停止”按钮终止反卷积过程。但是，请注意，停止按钮在两个连续的迭代之间仅被评估一次。</p>
<p>解卷积完成后，一个名为<code>polytrichum.deconv</code>的新数据集将出现在<code>Project View</code>中。您可以通过移动<code>Image Ortho Projections</code>连接线来查看反卷积数据从<code>polytrichum.am</code>到<code>polytrichum.deconv</code>。</p>
<p><strong>计算理论PSF</strong></p>
<p>有时很难进行磁珠测量，因此无法轻松进行实验性PSF获得。在这种情况下，可以使用理论上的PSF代替。Avizo提供了模块<code>Generate Point Spread Function</code>,可让您计算理论PSF。该模块可以通过以<code>Images And Fields / Generate Point Spread Function</code>从<code>Project &gt;Create Object...</code>。</p>
<p>创建模块后，必须再次输入一些参数。<code>resolution</code>和<code>voxel size</code>通过将PSGGen模块的<code>Data</code>端口连接到图像数据，可以最容易地指定大小即将卷积。在我们的情况下，请将此端口连接到<code>polytrichum.am</code>。</p>
<p>为了生成PSF，您还需要知道显微镜物镜的数值孔径，发射光的波长（以微米为单位输入！），以及浸入介质。在我们的测试示例中，这些值为NA = 1.4，lambda = 0.58和n = 1.516（油介质）。另外，将显微镜模式从宽视野更改为共焦。</p>
<p>按下<code>Apply</code>按钮后，计算出的PSF在项目中显示为标有PSF的图标视图。您可以使用<code>Ortho Slice</code>模块将理论PSF与测得的PSF进行比较。您会注意到，测得的PSF似乎稍宽。这是在许多实验。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-44-Generate%20Point%20Spread%20Function%E6%A8%A1%E5%9D%97%E7%94%9F%E6%88%90%E7%90%86%E8%AE%BAPSF.png" class="" alt="图3-44-Generate Point Spread Function模块生成理论PSF">
<p><em>图3.44</em>：Generate Point Spread Function模块生成理论PSF。</p>
<p>计算完理论PSF后，您可以按照以下说明进行非盲反卷积以上。但是，为方便起见，<code>Deconvolution</code>模块也能够计算理论值PSF本身。您可以通过断开解<code>Deconvolution</code>模块的<code>Kernel</code>端口来检查此情况。如果此端口上没有输入，则会显示其他输入字段，使您可以输入相同的内容。参数（数值孔径，波长，折射率和微观模式）与PSFGen中相同。输入这些参数后，可以通过按再次开始反卷积过程<code>Apply</code>按钮。<br>请注意，启动时，与<code>Deconvolution</code>模块连接的所有先前结果将被覆盖反卷积过程再次出现。因此，如果您想断开以前的结果，请确保比较反卷积与不同的输入PSF。</p>
<h3 id="3-6-4-盲反卷积教程Blind-Deconvolution"><a href="#3-6-4-盲反卷积教程Blind-Deconvolution" class="headerlink" title="3.6.4 盲反卷积教程Blind Deconvolution"></a>3.6.4 盲反卷积教程<code>Blind Deconvolution</code></h3><p>本教程说明如何在Avizo中执行盲反卷积。同时描述如何使用Avizo作业队列处理反卷积作业。就像上一个教程一样，假定读者已经熟悉Avizo本身的基本概念。如果没有，我们建议先阅读标准的Avizo教程。</p>
<p><strong>盲反卷积示例</strong></p>
<p>让我们首先加载原始图像数据集。</p>
<ul>
<li>从目录<code>data/deconv</code>加载文件<code>alphalobe.am</code>。</li>
<li>通过将<code>Image Ortho Projections</code>模块附加到数据集来可视化数据集。</li>
</ul>
<p>该数据集已使用标准荧光显微镜在所谓的<code>widefield</code>下记录条件。它显示了来自蜜蜂大脑α叶的神经元。相比共焦标准反卷积教程中使用的数据集alphalobe.am更大。它有一个决议248 x 248 x 256体素，均匀的体素尺寸为1微米。在投影的xy平面中查看神经元的结构可以清楚地确定。但是，图像的对比度相当差，因为存在大量失焦的光线或雾霾。与Avizo的盲人去卷积算法，我们可以增强图像数据，而无需了解显式的PSF预先。</p>
<ul>
<li>将解<code>Deconvolution</code>模块附加到alphalobe.am。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-45-Alphalobe%E5%8F%8D%E5%8D%B7%E7%A7%AF.png" class="" title="图3-45-Alphalobe反卷积">
<p><em>图3.45</em>：Alphalobe反卷积。</p>
<p>像这样调整去卷积参数：</p>
<p><em>Parameters</em>：<br>• Border Width: x = 8 y = 8 z = 10<br>• Iterations: 25<br>• Initial Estimate: input data<br>• Method: blind</p>
<p>Microscope:<br>• PSF: NA = 0.5 λ = 0.58 n = 1</p>
<p>各个参数的含义如下：</p>
<p><code>Border width</code>边框宽度：与标准非盲反卷积相同，图像数据必须放大保护带区域。否则，可能会出现边界伪影，即来自伪像一侧的信息。数据可以传递给对方。对于此数据集，我们指定8个体素的较小保护带区域，x和y方向。在z方向上，我们添加10个切片作为边界区域。结果的大小执行运算的资料阵列为256 x 256 x 266。<br>请注意，对于幂为<script type="math/tex">2^8</script>维，快速傅立叶变换反卷积算法中最昂贵的部分，可以更快地执行。<br><code>Iterations</code>迭代：我们在这里选择25。根据数据，通常至少要进行10次迭代需要。启用过度松弛（请参阅下文）后，结果通常在40岁后不会有太大改善迭代。<br><code>Initial estimate</code>初始估计：指定反卷积算法的初始估计。由于没有太多原始Alphalob图像中存在噪声，因此可以在此处选择输入数据。这导致算法收敛更快。<br><code>Overrelaxation</code>过松弛：过松弛是一种加速迭代解卷积收敛的技术。处理过程。我们通过选择固定的切换来启用超松弛。<br><code>Regularization</code>正则化：为了不进行正则化，我们在此处未选择任何内容。<br><code>Method</code>方法：我们在这里选择盲目的是为了选择盲反卷积算法。<br><code>PSF Parameters</code>PSF参数：对于alphalobe.am，数值孔径为0.5，波长为0.58微米，折射率为1.0（空气）。这些参数是必需的，以便应用某些约束到估计的点扩散函数。它们也用于计算初始PSF。收敛对初始参数敏感。如果将数据集连接到以下设备的内核端口反卷积模块，该数据集将用作具有给定PSF参数的初始PSF仍然充当约束。例如，您可以提供一个测得的PSF并将其安装到<br>反卷积算法计算实际数据。<br><code>Microscopic mode</code>微观模式：alphalobe.am是一个广角数据集，因此请在此处选择此选项。</p>
<p><strong>提交反卷积作业</strong></p>
<p>输入所有参数后，即可开始反卷积过程。这种计算可能需要一些时间。特别是，如果您想一次解卷积多个数据集，将很不方便在交互式会话中执行此操作。因此，可以将多个反卷积作业提交给Avizo作业队列，然后例如处理一夜。其工作原理如下：</p>
<ul>
<li>按批处理作业端口的<code>Setup...</code>按钮。弹出如图3.46所示的对话框。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-46-%E7%94%A8%E4%BA%8E%E6%8F%90%E4%BA%A4%E8%A7%A3%E5%8D%B7%E7%A7%AF%E4%BD%9C%E4%B8%9A%E7%9A%84%E5%AF%B9%E8%AF%9D%E6%A1%86.png" class="" title="图3-46-用于提交解卷积作业的对话框">
<p><em>图3.46</em>：用于提交解卷积作业的对话框。</p>
<ul>
<li>在对话框中选择一个文件名，您要在其中保存解卷积的数据集，例如，<code>C：/Temp/alphalobe-deconv.am</code>。</li>
<li>修改文本字段，以便每5次迭代写入一次检查点文件。</li>
</ul>
<p>检查点文件用于存储中间结果。使用以上设置，每5次迭代将分解后的数据写入文件中。检查点文件的名称类似于最终结果，但在文件名后缀之前插入一个连续的数字。例如，如果结果文件名为<code>C：/Temp/alphalobe-deconv.am</code>，则将检查点文件命名为<code>C：/Temp/alphalobe-deconv-0005.am</code>、<code>C：/Temp/alphalobe-deconv-0010.am</code>以此类推。现在，我们准备好实际提交批处理作业。</p>
<ul>
<li>按反卷积对话框的<code>Submit</code>按钮。几秒钟后，Avizo批处理作业出现对话框，如图3.47。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-47-Avizo%E4%BD%9C%E4%B8%9A%E5%AF%B9%E8%AF%9D%E6%A1%86%E6%98%BE%E7%A4%BA%E4%BA%86%E5%BE%85%E5%A4%84%E7%90%86%E7%9A%84%E5%8F%8D%E5%8D%B7%E7%A7%AF%E4%BD%9C%E4%B8%9A.png" class="" title="图3-47-Avizo作业对话框显示了待处理的反卷积作业">
<p><em>图3.47</em>：Avizo作业对话框显示了待处理的反卷积作业。</p>
<ul>
<li>选择解卷积作业，然后按<code>Start</code>按钮。</li>
</ul>
<p>您现在必须等待大约20分钟，直到反卷积作业完成。一旦作业队列已经启动，您可以退出Avizo。批处理作业将自动继续。如果Avizo是当解卷积作业退出时仍然运行，则结果将自动加载到Avizo中。否则，您必须重新启动Avizo并手动加载反卷积数据集。</p>
<h3 id="3-6-5-珠提取教程Bead-Extraction"><a href="#3-6-5-珠提取教程Bead-Extraction" class="headerlink" title="3.6.5 珠提取教程Bead Extraction"></a>3.6.5 珠提取教程<code>Bead Extraction</code></h3><p>非盲反卷积是一种增强3D显微镜质量的强大而强大的方法图片。但是，该方法要求图像的点扩散函数（PSF）负责提供图像模糊。如标准反卷积教程中所述，PSF可以可以从理论上计算得出，也可以从磁珠测量中获得。Avizo提供了一个特殊的目的模块，称为提取点扩展功能，可帮助提取PSF图像从一个或多个磁珠测量。在本教程中，将说明模块的使用。涵盖以下主题：</p>
<p>1.磁珠测量<br>2.投影设置视图和投影设置视图光标<br>3.重采样珠子并取平均</p>
<p><strong>磁珠测量</strong></p>
<p>PSF是在与实际规格相同的条件下记录的单点源图像。它可以通过发荧光的亚分辨率微球的图像来近似，即所谓的珠子。执行良好的磁珠测量需要一些实践和专业知识。为了得到好的结果，应遵循以下提示：</p>
<p>1.使用合适的珠子。重要的是，磁珠尺寸应小于约1/2PSF的半高全宽（FWHM）。获得合适珠子的良好来源用于PSF测量的是Molecular Probes（<a target="_blank" rel="noopener" href="http://www.probes.com/）或Polysciences（http://www.polysciences.com/">http://www.probes.com/）或Polysciences（http://www.polysciences.com/</a> ）。<br>2.珠子必须是固体。除了固体珠以外，还有球形的珠外壳，可以检查显微镜的焦平面。这种珠子不能用作来源用于当前版本的Avizo中的PSF生成。<br>3.不要记录多个珠子的簇。有时可能会有多个珠子粘在一起，出现作为一个大的亮点。从这样的位置计算PSF显然会导致错误的结果。<br>4.请注意，磁珠不能抵抗多种包埋介质。特别是，珠子会在诸如Permount（Fisher Scientific）和甲基的二甲苯基嵌入介质中被破坏水杨酸盐（通常用于清理组织）。作为替代，您可以使用浸油而是具有类似于水杨酸甲酯的折射率。<br>5.样品和珠子应始终在尽可能靠近盖玻片的位置成像。当不是可能将样品附着到盖玻片上，小珠也应在可比的范围内成像深度，嵌入相同的安装介质中。对珠进行成像的质量优于样本将产生稍微模糊的反卷积结果。但是，当PSF用于反卷积太宽，在反卷积过程中可能会出现伪影。物镜应始终根据安装介质进行选择，即样品附着在载玻片上，并嵌入折射率接近水的缓冲液中，使用不带滤光镜的油浸物镜时，可能会严重降低图像质量。校正领。正确成像数据的反卷积将始终优于反卷积受像差影响的数据的溶解。<br>6.如果安装介质保持液态，则会出现问题。在这种情况下，样本分布可能不是永久的。如果您要将标本包埋在水中，可以尝试将其浸入水中将珠子放在中等浓度的琼脂糖凝胶中。将小珠子附着到盖玻片（例如通过使其干燥）通常也足以固定。</p>
<p>包含多个珠子的图像数据集的示例在目录<code>AVIZO ROOT/data/deconv</code>。</p>
<ul>
<li>加载数据集<code>beads.am</code>。</li>
<li>使用<code>Image Ortho Projections</code>模块可视化数据。</li>
</ul>
<p><strong>投影视图和投影设置视图光标</strong></p>
<p>珠子数据集包含五个不同的珠子，可以在三个正交平面中清楚地看到它们<code>Image Ortho Projections</code>模块的功能。为了获得单个PSF，我们首先要选择几个“好”珠子。然后将这些珠子重新采样并取平均值，从而得到最终的PSF。珠子罐如果清晰可见且未与其他珠子重叠（即使当散焦），<br>选择“好”珠子是一个交互式过程。使用投影最容易完成光标模块。该模块允许您通过单击三个中的一个来选择3D空间中的一个点<code>Image Ortho Projections</code>模块的平面。第三个坐标是通过查看自动设置的强度最高的体素。用<code>Cursor</code>模块选择的点可以存储在<code>Landmarks</code>数据对象。</p>
<ul>
<li>将<code>Projection Cursor</code>模块连接到<code>Image Ortho Projections</code>模块。</li>
<li>单击三个平面之一上的任何珠子。</li>
<li>通过按<code>Add</code>按钮将当前光标位置存储在<code>Landmarks</code>对象中。</li>
<li>也选择并添加其他一些珠子。</li>
</ul>
<p>地标不必精确地位于珠子的中心。确切的中心位置可以稍后会自动安装。<br>您可以通过调用地标集编辑器从地标集中删除不正确的磁珠位置。为了激活编辑器，请选择地标集对象，然后按<code>Landmark Editor</code>按钮。如果你想要将其他珠子位置添加到现有地标集对象中，请确保<code>master</code>端口地标集对象的“对象”连接到<code>Cursor</code>模块。否则，将创建一个新的地标集对象将被创建。</p>
<p><strong>重采样和平均珠子</strong></p>
<p>现在，我们准备提取并平均单个珠子。这是通过摘录完成的点<code>Extract Point Spread Function</code>模块。</p>
<ul>
<li>将提取点扩展功能模块连接到Landmarks对象。</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-48-1-%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8Projection%20Cursor%E6%A8%A1%E5%9D%97%E4%BB%A5%E4%BA%A4%E4%BA%92%E6%96%B9%E5%BC%8F%E8%AF%86%E5%88%AB%E5%8D%95%E4%B8%AA%E7%8F%A0%E5%AD%90.png" class="" alt="图3-48-1-可以使用Projection Cursor模块以交互方式识别单个珠子">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-48-2-%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8Projection%20Cursor%E6%A8%A1%E5%9D%97%E4%BB%A5%E4%BA%A4%E4%BA%92%E6%96%B9%E5%BC%8F%E8%AF%86%E5%88%AB%E5%8D%95%E4%B8%AA%E7%8F%A0%E5%AD%90.png" class="" alt="图3-48-2-可以使用Projection Cursor模块以交互方式识别单个珠子">
<p><em>图3.48</em>：可以使用<code>Projection Cursor</code>模块以交互方式识别单个珠子。</p>
<ul>
<li>确保<code>Extract Point Spread Function</code>的<code>Data</code>端口已连接到<code>beads.am</code>数据集小珠。如果地标仍通过<code>Projection Cursor</code>和图像连接到珠子<code>Image Ortho Projections</code>模块，将自动建立连接。</li>
</ul>
<p>提<code>Extract Point Spread Function</code>模块提供了两个按钮，称为<code>Adjust centers</code>和<code>Estimate size</code>大小，应在实际提取珠子之前在预处理步骤中调用它。<br>第一个按钮（<code>Adjust centers</code>）可修改界标位置，以便将其精确定位在各个珠子的重心。<br>第二个按钮（<code>Estimate size</code>）计算PSF图像体素数量的估计值被生成。仅当没有将PSF图像连接到<code>BeadExtract</code>时，此按钮才有效。如果存在结果对象，则使用结果的分辨率和体素大小，并且端口变为不敏感。<br>使用<code>Undo</code>按钮可以撤消两个预处理按钮的任何操作。这可以是例如，如果两个小珠太靠近，以至于无法计算出正确的中心位置，则必须这样做。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-49-1-Extract%20Point%20Spread%20Function%E6%A8%A1%E5%9D%97%E5%AF%B9%E5%A4%9A%E4%B8%AA%E5%B0%8F%E7%8F%A0%E9%87%8D%E6%96%B0%E9%87%87%E6%A0%B7%E5%B9%B6%E5%8F%96%E5%B9%B3%E5%9D%87%E5%80%BC.png" class="" alt="图3-49-1-Extract Point Spread Function模块对多个小珠重新采样并取平均值">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-49-2-Extract%20Point%20Spread%20Function%E6%A8%A1%E5%9D%97%E5%AF%B9%E5%A4%9A%E4%B8%AA%E5%B0%8F%E7%8F%A0%E9%87%8D%E6%96%B0%E9%87%87%E6%A0%B7%E5%B9%B6%E5%8F%96%E5%B9%B3%E5%9D%87%E5%80%BC.png" class="" alt="图3-49-2-Extract Point Spread Function模块对多个小珠重新采样并取平均值">
<p><em>图3.49</em>：<code>Extract Point Spread Function</code>模块对多个小珠重新采样并取平均值。</p>
<p>通常，应避免相邻的珠子重叠。可能会出现小的重叠因为在重新采样期间，强度是根据周围磁珠的影响加权的。</p>
<ul>
<li>执行预处理步骤，调整中心并估计尺寸。</li>
<li>通过按“应用”按钮计算重新采样的PSF并求平均值。</li>
</ul>
<p>不管输入图像的数据类型如何，生成的PSF的数据类型都是浮点型。的单个珠子将按每个体素加权并添加到结果中。没有规范化随后将执行。您可以使用任何标准调查生成的PSF图像可视化模块。在图3.50中显示了生成的PSF的体积渲染。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-50-1-%E4%BD%BF%E7%94%A8Volume%20Render%E6%A8%A1%E5%9D%97%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9A%84%E6%9C%80%E7%BB%88PSF.png" class="" alt="图3-50-1-使用Volume Render模块可视化的最终PSF">
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-50-2-%E4%BD%BF%E7%94%A8Volume%20Render%E6%A8%A1%E5%9D%97%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9A%84%E6%9C%80%E7%BB%88PSF.png" class="" alt="图3-50-2-使用Volume Render模块可视化的最终PSF">
<p><em>图3.50</em>：使用<code>Volume Render</code>模块可视化的最终PSF。</p>
<p>在某些情况下，您可能需要平均记录在不同输入数据集中的多个珠子。这个可以通过为每个输入数据集创建一个<code>Landmarks</code>对象可以轻松实现。对于第一个输入数据集，如上所述提取珠子。对于其他输入数据集，也请使用<code>Extract Point Spread Function</code>模块。但是，请确保已连接从第一个输入数据集获得的PSF作为结果对象，然后按<code>Apply</code>按钮。为了将现有的PSF用作结果对象，将PSF的Master端口连接到<code>Extract Point Spread Function</code>（一旦完成此操作）提取点扩展功能的<code>Resolution</code>和<code>Voxel size</code>端口变得不敏感，请参见上文）。<br>如果使用现有结果，则仅将新珠子添加到现有数据集中。因此，数据在提取和求和之前，应根据其质量对集合进行强度缩放。获得最终结果中各个提取珠的合适权重。</p>
<h3 id="3-6-6-性能问题和多处理"><a href="#3-6-6-性能问题和多处理" class="headerlink" title="3.6.6 性能问题和多处理"></a>3.6.6 性能问题和多处理</h3><p>迭代最大似然反卷积本质上是最强大，最可靠的技术，修复3D光学部分的方法。但是，它在计算上也非常苛刻。处理大型3D数据集可能需要几分钟（有时甚至是几个小时）。这不是由于实现不当，但由于算法本身。盲和非盲的变体该方法严重依赖于快速傅立叶变换，以便有效地计算卷积。如果你要提高性能，请尝试调整数据量的大小，以使体素数量加上边框宽度是2的幂。有时值得稍微扩大边框宽度为了得到二的幂 尽管该算法可处理任何大小的数据，但2的幂可以转变得更快。</p>
<p>另一个问题是内存消耗。在内部，需要分配数据集的多个副本通过反卷积算法。这些副本应同时放入内存中（特定稍后将提供适用于低内存条件的算法变体版）。除了输入数据本身外，以下数量的工作数组还需要不同的方法：</p>
<ul>
<li>3个用于无盲算法的工作数组，无或具有固定的过松弛</li>
<li>5个工作数组，用于具有优化过松弛的非盲算法</li>
<li>5个用于盲算法的工作数组</li>
</ul>
<p>工作阵列的体素数是输入数据的体素数的乘积设置加上沿每个空间维度的边界。工作数组的原始数据类型是一个4字节的浮点数。例如，如果输入数据集的体素数量加上边框宽度为256 x 256 x 256（关于盲反卷积教程中的alphalobe.am数据集），不管输入数据集的原始数据类型如何，每个工作阵列都将约为64 MB。因此，非盲卷积至少需要192 MB（3x4x256x256x256字节）固定的过松弛，以及320 MB（5x4x256x256x256字节）的盲卷积。保持这个配置要在其上进行反卷积的计算机时请注意！但是，请注意在大多数平台上，拥有超过1.5 GB的主内存通常是没有意义的。欲了解更多内存，需要64位操作系统。<br>最后，应该提到的是，反卷积算法可以利用多处理器CPU板。尽管您在双处理器PC上无法获得两倍的性能，但可以提高几乎可以达到1.5。默认情况下，Avizo使用的处理器数量与计算机上的数量相同。推杆。如果出于某种原因要使用更少的处理器，则可以设置环境变量<code>AVIZO DECONV NUM THREADS</code>等于您实际要同时使用的处理器数量太好了。</p>
<p><strong>示例1：共聚焦数据</strong></p>
<p>原始数据集位于<code>AVIZO ROOT/data/deconv/polytrichum.am</code>下。下图是使用<code>Image Ortho Projections</code>模块创建的。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-51-1-%E5%8F%8D%E5%8D%B7%E7%A7%AF%E4%B9%8B%E5%89%8D%E7%9A%84polytrichum.am.png" class="" title="图3-51-1-反卷积之前的polytrichum.am">
<p><em>图3.51</em>：反卷积之前的polytrichum.am。</p>
<p>数据集的属性如下：</p>
<ul>
<li>数值孔径1.4</li>
<li>发射光的波长为0.58微米</li>
<li>折射率1.516（油）</li>
</ul>
<p><strong>示例2：广域数据</strong></p>
<p>原始数据集位于AVIZO ROOT / data / deconv / alphalobe.am下。下图是使用“图像正交投影”模块创建的。</p>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-52-1-%E5%8E%BB%E5%8D%B7%E7%A7%AF%E5%90%8E%E7%9A%84polytrichum.am.png" class="" title="图3-52-1-去卷积后的polytrichum.am">
<p><em>图3.52</em>：去卷积后的polytrichum.am。</p>
<p>数据集的属性如下：</p>
<ul>
<li>数值孔径0.5</li>
<li>发射光的波长为0.58微米</li>
<li>折射率1.0（空气）</li>
</ul>
<img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-53-%E5%8E%BB%E5%8D%B7%E7%A7%AF%E4%B9%8B%E5%89%8Dalphalobe.am%E7%9A%84XY%E6%9C%80%E5%A4%A7%E5%BC%BA%E5%BA%A6%E6%8A%95%E5%BD%B1.png" class="" title="图3-53-去卷积之前alphalobe.am的XY最大强度投影">
<p><em>图3.53</em>：去卷积之前alphalobe.am的XY最大强度投影。<br><img src="/2020/03/28/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-3/%E5%9B%BE3-54-%E5%8E%BB%E5%8D%B7%E7%A7%AF%E5%90%8Ealphalobe.am%E7%9A%84XY%E6%9C%80%E5%A4%A7%E5%BC%BA%E5%BA%A6%E6%8A%95%E5%BD%B1.png" class="" title="图3-54-去卷积后alphalobe.am的XY最大强度投影"><br><em>图3.54</em>：去卷积后alphalobe.am的XY最大强度投影。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">HibisciDai</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://hibiscidai.com/2020/03/28/Avizo用户使用手册-3/">http://hibiscidai.com/2020/03/28/Avizo用户使用手册-3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://hibiscidai.com">HibisciDai</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/AvizoUsersGuide/">AvizoUsersGuide</a><a class="post-meta__tags" href="/tags/%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/">用户使用手册</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="/img/zhifubaodashang.jpg"><div class="post-qr-code__desc">支付宝打赏</div></div><div class="post-qr-code-item"><img class="post-qr-code__img" src="/img/weixin.png"><div class="post-qr-code__desc">微信打赏</div></div></div><div class="social-share pull-right" data-disabled="linkedin,diandian"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/03/29/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-4/"><i class="fa fa-chevron-left">  </i><span>Avizo用户使用手册-4</span></a></div><div class="next-post pull-right"><a href="/2020/03/27/Avizo%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C-2/"><span>Avizo用户使用手册-2</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="lv-container" data-id="city" data-uid="MTAyMC8zNTQ2NC8xMjAwMA=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div><footer class="footer-bg" style="background-image: url(/img/banner2.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2023 By HibisciDai</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script src="/js/search/local-search.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>