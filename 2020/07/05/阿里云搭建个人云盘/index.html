<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="阿里云搭建个人云盘"><meta name="keywords" content="学习笔记,博客搭建过程,阿里云"><meta name="author" content="HibisciDai"><meta name="copyright" content="HibisciDai"><title>阿里云搭建个人云盘 | HibisciDai</title><link rel="shortcut icon" href="/img/avatar.png"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '6.1.0'
} </script><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="HibisciDai" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98"><span class="toc-number">1.</span> <span class="toc-text">阿里云搭建个人云盘</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-number">2.</span> <span class="toc-text">思路</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Nextcloud"><span class="toc-number">3.</span> <span class="toc-text">Nextcloud</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84"><span class="toc-number">4.</span> <span class="toc-text">阿里云服务器架构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8ELNMP%E9%83%A8%E7%BD%B2Nextcloud%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-number">5.</span> <span class="toc-text">基于LNMP部署Nextcloud服务端</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E9%80%9A%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.1.</span> <span class="toc-text">开通云服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%BD%91%E7%9B%98%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83"><span class="toc-number">5.2.</span> <span class="toc-text">安装网盘运行环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%BA%91%E5%B8%82%E5%9C%BA%E7%9A%84%E9%95%9C%E5%83%8F%E6%9C%89%E4%BB%A5%E4%B8%8B%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F%E3%80%82"><span class="toc-number">5.2.1.</span> <span class="toc-text">使用云市场的镜像有以下几种方式。</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%AD%E4%B9%B0ECS%E6%97%B6%E9%80%89%E6%8B%A9"><span class="toc-number">5.2.1.1.</span> <span class="toc-text">购买ECS时选择</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%B2%E7%BB%8F%E8%B4%AD%E4%B9%B0ECS%E7%9A%84%E4%BD%BF%E7%94%A8%E9%80%89%E6%8B%A9"><span class="toc-number">5.2.1.2.</span> <span class="toc-text">已经购买ECS的使用选择</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%9C%A8%E9%95%9C%E5%83%8F%E9%A1%B5%E9%9D%A2%E8%B4%AD%E4%B9%B0"><span class="toc-number">5.2.1.3.</span> <span class="toc-text">直接在镜像页面购买</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AE%89%E5%85%A8%E7%BB%84%EF%BC%88%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%89"><span class="toc-number">5.2.2.</span> <span class="toc-text">设置安全组（防火墙）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-number">5.2.3.</span> <span class="toc-text">查看环境安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85NextCloud%E7%BD%91%E7%9B%98%E7%A8%8B%E5%BA%8F"><span class="toc-number">5.3.</span> <span class="toc-text">安装NextCloud网盘程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8putty-xshell-%E5%92%8CXftp-%E6%9D%A5%E5%AE%9E%E7%8E%B0%E5%AF%B9ECS%E7%9A%84%E8%BF%9C%E7%A8%8B%E7%BB%88%E7%AB%AF%E6%8E%A7%E5%88%B6%E5%92%8C%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93"><span class="toc-number">5.3.1.</span> <span class="toc-text">使用putty(xshell)和Xftp()来实现对ECS的远程终端控制和文件传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD-NextCloud"><span class="toc-number">5.3.2.</span> <span class="toc-text">下载 NextCloud</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9DNextcloud%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.3.3.</span> <span class="toc-text">拷贝Nextcloud安装文件到服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8SSH%E4%B8%AD%E8%BF%90%E8%A1%8C%E5%AE%89%E8%A3%85%E6%8C%87%E4%BB%A4"><span class="toc-number">5.3.4.</span> <span class="toc-text">在SSH中运行安装指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E8%BE%93%E5%85%A5-http-ecsip%EF%BC%8C%E8%BE%93%E5%85%A5%E7%AE%A1%E7%90%86%E5%91%98%E7%9A%84%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%EF%BC%8C%E9%A9%AC%E4%B8%8A%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85"><span class="toc-number">5.3.5.</span> <span class="toc-text">浏览器中输入 http:&#x2F;&#x2F;ecsip，输入管理员的账号密码，马上开始安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E4%BA%8C-%E4%BA%91%E7%9B%98%E9%95%9C%E5%83%8F"><span class="toc-number">5.4.</span> <span class="toc-text">环境安装方法二-云盘镜像</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#centos7-2%E8%A3%B8%E8%A3%85"><span class="toc-number">6.</span> <span class="toc-text">centos7.2裸装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#LAMP"><span class="toc-number">6.1.</span> <span class="toc-text">LAMP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85apache"><span class="toc-number">6.1.1.</span> <span class="toc-text">安装apache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-php7-2"><span class="toc-number">6.1.2.</span> <span class="toc-text">安装 php7.2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%BA%90"><span class="toc-number">6.1.2.1.</span> <span class="toc-text">安装源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%85%E9%99%A4%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC"><span class="toc-number">6.1.2.2.</span> <span class="toc-text">清除历史版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%89%A9%E5%B1%95%E5%8C%85"><span class="toc-number">6.1.2.3.</span> <span class="toc-text">安装扩展包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="toc-number">6.1.2.4.</span> <span class="toc-text">启动服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85mariadb"><span class="toc-number">6.1.3.</span> <span class="toc-text">安装mariadb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85nextcloud"><span class="toc-number">6.1.4.</span> <span class="toc-text">安装nextcloud</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E5%AE%89%E8%A3%85"><span class="toc-number">7.</span> <span class="toc-text">docker安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9D%E5%A1%94%E9%95%9C%E5%83%8F%E5%AE%89%E8%A3%85"><span class="toc-number">8.</span> <span class="toc-text">宝塔镜像安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#centos%E5%AE%89%E8%A3%85%E5%AE%9D%E5%A1%94"><span class="toc-number">8.1.</span> <span class="toc-text">centos安装宝塔</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83"><span class="toc-number">8.2.</span> <span class="toc-text">安装环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%AB%99%E7%82%B9"><span class="toc-number">8.3.</span> <span class="toc-text">添加站点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9Dnextcloud%E6%96%87%E4%BB%B6"><span class="toc-number">8.4.</span> <span class="toc-text">拷贝nextcloud文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8"><span class="toc-number">8.5.</span> <span class="toc-text">开始使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E4%BC%98%E5%8C%96"><span class="toc-number">8.6.</span> <span class="toc-text">一些优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85php%E6%89%A9%E5%B1%95"><span class="toc-number">8.6.1.</span> <span class="toc-text">安装php扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#php%E8%AE%BE%E7%BD%AE"><span class="toc-number">8.6.2.</span> <span class="toc-text">php设置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91OSS"><span class="toc-number">9.</span> <span class="toc-text">使用阿里云OSS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%AD%E4%B9%B0oss"><span class="toc-number">9.1.</span> <span class="toc-text">购买oss</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85OSSFS"><span class="toc-number">9.2.</span> <span class="toc-text">安装OSSFS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96-AccessKeyId-Secret"><span class="toc-number">9.3.</span> <span class="toc-text">获取 AccessKeyId&#x2F;Secret</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD"><span class="toc-number">9.4.</span> <span class="toc-text">挂载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%AF%86%E4%BB%A4"><span class="toc-number">9.4.1.</span> <span class="toc-text">存储密令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86oss-bucket%E6%8C%82%E8%BD%BD%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95"><span class="toc-number">9.4.2.</span> <span class="toc-text">将oss bucket挂载到指定目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E6%8C%82%E8%BD%BD%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9-tmp-ossfs-%E5%B1%9E%E4%BA%8E%E6%9F%90%E4%B8%AAuser"><span class="toc-number">9.4.3.</span> <span class="toc-text">使挂载的文件夹(&#x2F;tmp&#x2F;ossfs)属于某个user</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8Bapache%E7%94%A8%E6%88%B7%E7%9A%84uid%E5%92%8Cgid"><span class="toc-number">9.4.3.1.</span> <span class="toc-text">查看apache用户的uid和gid</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%8A%E9%9D%A2%E6%9F%A5%E6%89%BE%E5%88%B0%E7%9A%84uid%E5%92%8Cgid%E6%8C%82%E8%BD%BDOSS%E5%AD%98%E5%82%A8"><span class="toc-number">9.4.3.2.</span> <span class="toc-text">使用上面查找到的uid和gid挂载OSS存储</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%8C%82%E8%BD%BD%E6%83%85%E5%86%B5"><span class="toc-number">9.4.4.</span> <span class="toc-text">查看挂载情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD"><span class="toc-number">9.4.5.</span> <span class="toc-text">设置开机自动挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nextcloud%E8%AE%BE%E7%BD%AE%E5%BC%80%E5%90%AF%E6%8C%82%E8%BD%BD"><span class="toc-number">9.4.6.</span> <span class="toc-text">nextcloud设置开启挂载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%B3%E4%B8%8A%E8%A7%92%E7%82%B9%E5%87%BB%E5%BA%94%E7%94%A8%EF%BC%8C%E5%90%AF%E7%94%A8External-storage-support"><span class="toc-number">9.4.6.1.</span> <span class="toc-text">右上角点击应用，启用External storage support</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5%E5%A4%96%E9%83%A8%E5%AD%98%E5%82%A8%E4%BC%9A%E5%8F%91%E7%8E%B0%E6%8F%90%E7%A4%BA%EF%BC%9A%E2%80%9Csmbclient%E2%80%9D-%E6%9C%AA%E5%AE%89%E8%A3%85%E3%80%82%E6%97%A0%E6%B3%95%E6%8C%82%E8%BD%BD-%E2%80%9CSMB-CIFS%E2%80%9D-%E2%80%9CSMB-CIFS-%E4%BD%BF%E7%94%A8-OC-%E7%99%BB%E5%BD%95%E4%BF%A1%E6%81%AF%E2%80%9D%E3%80%82%E8%AF%B7%E8%81%94%E7%B3%BB%E7%AE%A1%E7%90%86%E5%91%98%E5%AE%89%E8%A3%85%E3%80%82%E9%9C%80%E8%A6%81%E8%BF%9B%E5%85%A5SSH%E5%AE%89%E8%A3%85smbclient%E3%80%82"><span class="toc-number">9.4.6.2.</span> <span class="toc-text">进入外部存储会发现提示：“smbclient” 未安装。无法挂载 “SMB &#x2F; CIFS”, “SMB &#x2F; CIFS 使用 OC 登录信息”。请联系管理员安装。需要进入SSH安装smbclient。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%82%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95%E5%92%8C%E6%96%87%E4%BB%B6%E5%8F%AF%E8%83%BD%E5%8F%AF%E4%BB%A5%E4%BB%8E%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%BF%E9%97%AE%E3%80%82-htaccess-%E6%96%87%E4%BB%B6%E4%B8%8D%E5%B7%A5%E4%BD%9C%E3%80%82%E5%BC%BA%E7%83%88%E5%BB%BA%E8%AE%AE%E6%82%A8%E9%85%8D%E7%BD%AE%E6%82%A8%E7%9A%84-web-%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E4%BD%BF%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95%E4%B8%8D%E5%86%8D%E5%8F%AF%E8%AE%BF%E9%97%AE%EF%BC%8C%E6%88%96%E5%B0%86%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95%E7%A7%BB%E5%88%B0-web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%87%E6%A1%A3%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B9%8B%E5%A4%96%E3%80%82"><span class="toc-number">9.4.7.</span> <span class="toc-text">您的数据目录和文件可能可以从互联网访问。.htaccess 文件不工作。强烈建议您配置您的 web 服务器，使数据目录不再可访问，或将数据目录移到 web 服务器文档根目录之外。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP%E7%9A%84%E5%AE%89%E8%A3%85%E4%BC%BC%E4%B9%8E%E4%B8%8D%E6%AD%A3%E7%A1%AE%EF%BC%8C%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E3%80%82getenv-%E2%80%9CPATH%E2%80%9D-%E5%87%BD%E6%95%B0%E6%B5%8B%E8%AF%95%E8%BF%94%E5%9B%9E%E4%BA%86%E4%B8%80%E4%B8%AA%E7%A9%BA%E5%80%BC%E3%80%82-%E8%AF%B7%E5%8F%82%E7%85%A7%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9A%84PHP%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E%E6%9F%A5%E9%98%85%E6%82%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84PHP%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%EF%BC%8C%E7%89%B9%E5%88%AB%E6%98%AF%E5%9C%A8%E4%BD%BF%E7%94%A8php-fpm%E6%97%B6%E3%80%82"><span class="toc-number">9.4.8.</span> <span class="toc-text">PHP的安装似乎不正确，无法访问系统环境变量。getenv(“PATH”)函数测试返回了一个空值。 请参照安装说明文档中的PHP配置说明查阅您服务器的PHP配置信息，特别是在使用php-fpm时。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PHP-configuration-option-output-buffering-must-be-disabled"><span class="toc-number">9.4.9.</span> <span class="toc-text">PHP configuration option output_buffering must be disabled</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%82%A8%E7%9A%84%E7%BD%91%E9%A1%B5%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9C%AA%E6%AD%A3%E7%A1%AE%E8%AE%BE%E7%BD%AE%E4%BB%A5%E8%A7%A3%E6%9E%90%E2%80%9C-well-known-webfinger%E2%80%9D"><span class="toc-number">9.4.10.</span> <span class="toc-text">您的网页服务器未正确设置以解析“&#x2F;.well-known&#x2F;webfinger”</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA"><span class="toc-number">10.</span> <span class="toc-text">网盘使用演示</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AB%AF"><span class="toc-number">10.1.</span> <span class="toc-text">浏览器端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%B0%E5%9D%80"><span class="toc-number">10.1.1.</span> <span class="toc-text">输入服务器地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E5%88%86%E9%85%8D%E7%94%A8%E6%88%B7%E5%90%8D%E5%AF%86%E7%A0%81"><span class="toc-number">10.1.2.</span> <span class="toc-text">输入分配用户名密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E8%AF%AD%E8%A8%80"><span class="toc-number">10.1.3.</span> <span class="toc-text">设置语言</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#win%E7%AB%AF"><span class="toc-number">10.2.</span> <span class="toc-text">win端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDwindows%E7%89%88%E6%9C%AC%E8%BF%9B%E8%A1%8C%E6%9C%AC%E5%9C%B0%E5%AE%89%E8%A3%85"><span class="toc-number">10.2.1.</span> <span class="toc-text">下载windows版本进行本地安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E7%99%BB%E5%BD%95%EF%BC%8C%E8%BE%93%E5%85%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%B0%E5%9D%80"><span class="toc-number">10.3.</span> <span class="toc-text">点击登录，输入服务器地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#windows%E7%99%BB%E5%BD%95"><span class="toc-number">10.4.</span> <span class="toc-text">windows登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#android%E7%AB%AF"><span class="toc-number">10.5.</span> <span class="toc-text">android端</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">11.</span> <span class="toc-text">应用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%97%9B%E7%82%B9"><span class="toc-number">11.1.</span> <span class="toc-text">痛点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">11.2.</span> <span class="toc-text">使用解决方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A1%AC%E7%9B%98%E4%BB%8B%E7%BB%8D"><span class="toc-number">11.3.</span> <span class="toc-text">硬盘介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7"><span class="toc-number">11.4.</span> <span class="toc-text">使用技巧</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/Avatar.png"></div><div class="author-info__name text-center">HibisciDai</div><div class="author-info__description text-center">HibisciDai'Blog</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">222</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">76</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">29</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://github.com/HibisciDai/hexo-theme-melody">HexoTheme-github</a><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://molunerfinn.com/">molunerfinn</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/banner2.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">HibisciDai</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/about">关于我</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/gallery">相册</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">阿里云搭建个人云盘</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-05</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AF%BE%E5%A4%96%E6%89%A9%E5%B1%95/">课外扩展</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">4.8k</span><span class="post-meta__separator">|</span><span>阅读时长: 17 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98.png" class="" title="阿里云搭建个人云盘">
<p>阿里云搭建个人云盘</p>
<span id="more"></span>
<p>[TOC]</p>
<h1 id="阿里云搭建个人云盘"><a href="#阿里云搭建个人云盘" class="headerlink" title="阿里云搭建个人云盘"></a>阿里云搭建个人云盘</h1><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>阿里云ESC服务器可作为管理系统，<br>OSS对象存储可以当做网盘，<br>安装Nextcloud即可协作网盘。</p>
<h1 id="Nextcloud"><a href="#Nextcloud" class="headerlink" title="Nextcloud"></a>Nextcloud</h1><p><a target="_blank" rel="noopener" href="https://nextcloud.com/">Nextcloud官网</a></p>
<p>Nextcloud是一款开源免费的私有云存储网盘项目，可以让你快速便捷地搭建一套属于自己或团队的云同步网盘，从而实现跨平台跨设备文件同步、共享、版本控制、团队协作等功能。它的客户端覆盖了Windows、Mac、Android、iOS、Linux 等各种平台，也提供了网页端以及 WebDAV接口，所以你几乎可以在各种设备上方便地访问你的云盘。</p>
<p>Nextcloud也提供了许多应用安装，包括但不限于Markdown在线编辑、OnlyOffice（需另外部署服务端）、思维导图、日历等，你可以自行选择以丰富个人网盘的功能。</p>
<p>Nextcloud的服务端部署方式有很多种，本文会介绍两种方法（基于LNMP和基于Docker），读者可以根据自己情况进行选择一种部署方式。服务器需要是Linux操作系统，你可以在本地安装一个虚拟机进行测试，然后再到云服务器上部署。注意Windows系统不支持，建议装个虚拟机。Mac系统理论上支持，可以参考Linux教程来操作。Ubuntu系统支持snap一键安装，甚至安装系统时都提供安装nextcloud的选项。</p>
<h1 id="阿里云服务器架构"><a href="#阿里云服务器架构" class="headerlink" title="阿里云服务器架构"></a>阿里云服务器架构</h1><p>阿里云提供ECS服务器和轻量应用型服务器。都为物理主机，前者操作细节更多，后者较便捷。</p>
<p>对于系统镜像可以确定Linux版本，此为系统环境基础。然后搭建LNMP或者LNMP的web环境，最终安装Nextcloud网盘。</p>
<p>ECS镜像有直接可以用的系统镜像，较为方便，对于纯净系统需要手动安装配置环境，也可以采用宝塔管理界面进行安装。</p>
<h1 id="基于LNMP部署Nextcloud服务端"><a href="#基于LNMP部署Nextcloud服务端" class="headerlink" title="基于LNMP部署Nextcloud服务端"></a>基于LNMP部署Nextcloud服务端</h1><h2 id="开通云服务器"><a href="#开通云服务器" class="headerlink" title="开通云服务器"></a>开通云服务器</h2><p>打开阿里云的ESC服务器购买页面。</p>
<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/adc/student/?spm=5176.12901015.0.i12901015.23b1525cYEqdt8">阿里云高校计划</a></p>
<p>免费领取</p>
<p><a target="_blank" rel="noopener" href="https://promotion.aliyun.com/ntms/act/campus2018.html?utm_content=se_1005940100">阿里云学生购买服务器优惠</a></p>
<p>购买轻量应用服务器</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E8%B4%AD%E4%B9%B0%E8%BD%BB%E9%87%8F%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8.png" class="" title="购买轻量应用服务器">
<h2 id="安装网盘运行环境"><a href="#安装网盘运行环境" class="headerlink" title="安装网盘运行环境"></a>安装网盘运行环境</h2><p>一般来说阿里云提供的公共镜像是一个空白的Linux发行版或者Windows Server，具体的运行环境我们还是需要自行搭建，对于新手来说一下子就提高了使用ECS的学习成本，这里我们使用云市场的现有镜像，无需安装，开箱即用！</p>
<p>目前主流的建站环境就是 <code>LAMP</code> 环境，它是 Linux + Apache Httpd + MySQL + PHP 的缩写，是网页环境的黄金搭档，可以兼容几乎所有的HTML和PHP运行需求。</p>
<p>这里推荐使用 <code>LAMP环境（Ubuntu16.04 Apache PHP7.1）</code>，因为这个镜像提供了比较丰富的工具：例如OSS备份、Let’s Encrypt等，而且Apache、PHP 等组件可以自行升级，更加安全！</p>
<h3 id="使用云市场的镜像有以下几种方式。"><a href="#使用云市场的镜像有以下几种方式。" class="headerlink" title="使用云市场的镜像有以下几种方式。"></a>使用云市场的镜像有以下几种方式。</h3><h4 id="购买ECS时选择"><a href="#购买ECS时选择" class="headerlink" title="购买ECS时选择"></a>购买ECS时选择</h4><p>还记得在购买ECS的使用选择公共镜像吗？我们可以在这一步就选择镜像市场，然后在搜索框输入关键词：LAMP环境（Ubuntu16.04 Apache PHP7.1）</p>
<h4 id="已经购买ECS的使用选择"><a href="#已经购买ECS的使用选择" class="headerlink" title="已经购买ECS的使用选择"></a>已经购买ECS的使用选择</h4><p>停止运行实例，直接更换操作系统即可。</p>
<p>我们可以在这一步就选择镜像市场，然后在搜索框输入关键词：<code>LAMP环境（Ubuntu 64位 Apache PHP5.4） v1.1</code></p>
<h4 id="直接在镜像页面购买"><a href="#直接在镜像页面购买" class="headerlink" title="直接在镜像页面购买"></a>直接在镜像页面购买</h4><p>参考购买流程。</p>
<h3 id="设置安全组（防火墙）"><a href="#设置安全组（防火墙）" class="headerlink" title="设置安全组（防火墙）"></a>设置安全组（防火墙）</h3><p><code>更多</code>—&gt;<code>网络和安全组</code>—&gt;<code>安全组配置</code></p>
<p>授权类型：全部<br>授权对象：0.0.0.0/0</p>
<p>这就是默认开放所有端口且允许所有IP访问了。</p>
<p>这是VPC（专有网络）的设置，如果是经典网络，设置公网出入方向的内容即可，不要输入内网的。</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E8%AE%BE%E7%BD%AE%E5%AE%89%E5%85%A8%E7%BB%84%EF%BC%88%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%89-1.png" class="" title="设置安全组（防火墙）-1">
<h3 id="查看环境安装"><a href="#查看环境安装" class="headerlink" title="查看环境安装"></a>查看环境安装</h3><p>访问：<code>http://你的公网iP/</code></p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E8%AE%BE%E7%BD%AE%E5%AE%89%E5%85%A8%E7%BB%84%EF%BC%88%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%89-2.png" class="" title="设置安全组（防火墙）-2">
<p>点击<code>探针</code>查看PHP运行环境和相关服务数据。</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E8%AE%BE%E7%BD%AE%E5%AE%89%E5%85%A8%E7%BB%84%EF%BC%88%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%89-3.png" class="" title="设置安全组（防火墙）-3">
<h2 id="安装NextCloud网盘程序"><a href="#安装NextCloud网盘程序" class="headerlink" title="安装NextCloud网盘程序"></a>安装NextCloud网盘程序</h2><p>NextCloud可以帮助我们搭建自己的个人网盘，托管到阿里云ECS上可以实现文件的自有管理，方便快捷的同时极大的提升了安全性。</p>
<h3 id="使用putty-xshell-和Xftp-来实现对ECS的远程终端控制和文件传输"><a href="#使用putty-xshell-和Xftp-来实现对ECS的远程终端控制和文件传输" class="headerlink" title="使用putty(xshell)和Xftp()来实现对ECS的远程终端控制和文件传输"></a>使用putty(xshell)和Xftp()来实现对ECS的远程终端控制和文件传输</h3><p>putty远程连接终端</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E5%AE%89%E8%A3%85NextCloud%E7%BD%91%E7%9B%98%E7%A8%8B%E5%BA%8F-1.png" class="" title="安装NextCloud网盘程序-1">
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E5%AE%89%E8%A3%85NextCloud%E7%BD%91%E7%9B%98%E7%A8%8B%E5%BA%8F-2.png" class="" title="安装NextCloud网盘程序-2">
<p>Xftp远程连接文件传输</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E5%AE%89%E8%A3%85NextCloud%E7%BD%91%E7%9B%98%E7%A8%8B%E5%BA%8F-3.png" class="" title="安装NextCloud网盘程序-3">
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E5%AE%89%E8%A3%85NextCloud%E7%BD%91%E7%9B%98%E7%A8%8B%E5%BA%8F-4.png" class="" title="安装NextCloud网盘程序-4">
<h3 id="下载-NextCloud"><a href="#下载-NextCloud" class="headerlink" title="下载 NextCloud"></a>下载 NextCloud</h3><p><a target="_blank" rel="noopener" href="https://download.nextcloud.com/server/releases/latest.zip?spm=5176.10731542.0.0.1f0c5a9fGAbDDo&amp;file=latest.zip">NextCloud</a></p>
<p>解压缩到本机</p>
<h3 id="拷贝Nextcloud安装文件到服务器"><a href="#拷贝Nextcloud安装文件到服务器" class="headerlink" title="拷贝Nextcloud安装文件到服务器"></a>拷贝<code>Nextcloud</code>安装文件到服务器</h3><p>进入<code>/data/wwwroot/default/</code> 目录，创建一个<code>old</code>文件夹，将目录上的原始文件全部搬到old内</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E5%AE%89%E8%A3%85NextCloud%E7%BD%91%E7%9B%98%E7%A8%8B%E5%BA%8F-5.png" class="" title="安装NextCloud网盘程序-5">
<p>将 Nextcloud 上传至 <code>/data/wwwroot/default/</code> 目录</p>
<h3 id="在SSH中运行安装指令"><a href="#在SSH中运行安装指令" class="headerlink" title="在SSH中运行安装指令"></a>在SSH中运行安装指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/;mbstring.func_overload = 0/mbstring.func_overload = 0/g&#x27;</span> /usr/local/php/etc/php.ini</span><br><span class="line"><span class="built_in">rm</span> -rf /usr/local/php71/etc/php.d/ext-opcache.ini</span><br><span class="line"><span class="built_in">chown</span> -R www /data/wwwroot/default/</span><br><span class="line">service httpd restart</span><br><span class="line"></span><br><span class="line">service httpd restart</span><br></pre></td></tr></table></figure>
<h3 id="浏览器中输入-http-ecsip，输入管理员的账号密码，马上开始安装"><a href="#浏览器中输入-http-ecsip，输入管理员的账号密码，马上开始安装" class="headerlink" title="浏览器中输入 http://ecsip，输入管理员的账号密码，马上开始安装"></a>浏览器中输入 <code>http://ecsip</code>，输入管理员的账号密码，马上开始安装</h3><h2 id="环境安装方法二-云盘镜像"><a href="#环境安装方法二-云盘镜像" class="headerlink" title="环境安装方法二-云盘镜像"></a>环境安装方法二-云盘镜像</h2><p>也可以在镜像库中直接选择<code>云盘存储 nextcloud (centos7 64位) V3.0</code><br>默认用户：yuncan<br>默认密码：Yuncan123</p>
<p>登录成功后点击下图中的设置，修改显示语言为中文简体（英文好的自行跳过）</p>
<p><code>头像</code>—&gt;<code>应用</code>—&gt;<code>external storage support</code>，点击启动（用于挂载外部存储的插件）</p>
<p>使用远程连接工具（CRT、PUTTY等)远程连接到服务器<br>输入以下命令下载安装ossfs，用于安装阿里云OSSFS插件，使服务器可以挂载阿里云OSS对象存储</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://gosspublic.alicdn.com/ossfs/ossfs_1.80.5_centos7.0_x86_64.rpm</span><br><span class="line">yum install -y ossfs_1.80.5_centos7.0_x86_64.rpm</span><br></pre></td></tr></table></figure>
<ul>
<li>设置 <code>bucket name</code> 和 <code>AccessKeyId/Secret</code> 信息，将其存放在/etc/passwd-ossfs 文件中，注意这个文件的权限必须正确设置为 640。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> bucket-name:access-key-id:access-key-secret &gt; /etc/passwd-ossfs</span><br><span class="line"></span><br><span class="line"><span class="built_in">chmod</span> 640 /etc/passwd-ossfs</span><br></pre></td></tr></table></figure>
<ul>
<li>查看apache用户的uid和gid</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Cat /etc/passwd</span><br><span class="line"></span><br><span class="line">Cat /etc/group</span><br></pre></td></tr></table></figure>
<h1 id="centos7-2裸装"><a href="#centos7-2裸装" class="headerlink" title="centos7.2裸装"></a>centos7.2裸装</h1><h2 id="LAMP"><a href="#LAMP" class="headerlink" title="LAMP"></a>LAMP</h2><h3 id="安装apache"><a href="#安装apache" class="headerlink" title="安装apache"></a>安装apache</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum update	<span class="comment">#更新源</span></span><br><span class="line">yum install httpd	<span class="comment">#安装apache</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld <span class="comment">#关闭防火墙</span></span><br><span class="line">systemctl start httpd <span class="comment">#开启httpd服务</span></span><br><span class="line">systemctl <span class="built_in">enable</span> httpd.service <span class="comment">#开启httpd开机自启</span></span><br><span class="line">systemctl status httpd.service <span class="comment">#查看httpd状态</span></span><br></pre></td></tr></table></figure>
<p>浏览器输入ip后</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E5%AE%89%E8%A3%85apache.png" class="" title="安装apache">
<h3 id="安装-php7-2"><a href="#安装-php7-2" class="headerlink" title="安装 php7.2"></a>安装 php7.2</h3><h4 id="安装源"><a href="#安装源" class="headerlink" title="安装源"></a>安装源</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release -y</span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/epel-release.rpm  </span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span><br></pre></td></tr></table></figure>
<h4 id="清除历史版本"><a href="#清除历史版本" class="headerlink" title="清除历史版本"></a>清除历史版本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove php*</span><br></pre></td></tr></table></figure>
<h4 id="安装扩展包"><a href="#安装扩展包" class="headerlink" title="安装扩展包"></a>安装扩展包</h4><p>基础版</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install php72w php72w-cli php72w-fpm php72w-common php72w-devel </span><br></pre></td></tr></table></figure>
<p>豪华版</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y php72w php72w-opcache php72w-xml php72w-mcrypt php72w-gd php72w-devel php72w-mysql php72w-intl php72w-mbstring</span><br></pre></td></tr></table></figure>
<h4 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> php-fpm.service</span><br><span class="line">systemctl start php-fpm.service</span><br></pre></td></tr></table></figure>
<h3 id="安装mariadb"><a href="#安装mariadb" class="headerlink" title="安装mariadb"></a>安装mariadb</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install mariadb mariadb-server <span class="comment">#安装mariadb</span></span><br><span class="line">yum remove mariadb</span><br><span class="line">sudo systemctl start mariadb <span class="comment">#启动mariadb</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> mariadb <span class="comment">#设置开机自启</span></span><br></pre></td></tr></table></figure>
<p>配置MariaDB的root用户密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br><span class="line"></span><br><span class="line">Set root password? [Y/n] Y</span><br><span class="line">New password:</span><br><span class="line">Re-enter new password:</span><br><span class="line">Remove anonymous <span class="built_in">users</span>? [Y/n] Y</span><br><span class="line">Disallow root login remotely? [Y/n] Y</span><br><span class="line">Remove <span class="built_in">test</span> database and access to it? [Y/n] Y</span><br><span class="line">Reload privilege tables now? [Y/n] Y</span><br></pre></td></tr></table></figure>
<p>创建数据库，并创建数据库管理员</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p <span class="comment">#进入mariadb  会提示输密码</span></span><br><span class="line">CREATE DATABASE nextcloud; <span class="comment">#创建数据库 nextcloud</span></span><br><span class="line">grant all privileges on `nextcloud`.* to <span class="string">&#x27;nextcloudadmin&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;passwd&#x27;</span> with grant option； <span class="comment">#给这个数据库创建一个非root管理员</span></span><br><span class="line">FLUSH PRIVILEGES;         <span class="comment">#刷新权限</span></span><br><span class="line"><span class="built_in">exit</span>;          <span class="comment">#退出</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE nextcloud;</span><br><span class="line"><span class="comment">#这里nextcloud是数据库名，你可以随意指定，如CREATE DATABASE dbname;</span></span><br><span class="line"></span><br><span class="line">grant all privileges on `nextcloud`.* to <span class="string">&#x27;nextcloudadmin&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;passwd&#x27;</span> with grant option；  </span><br><span class="line"><span class="comment">#上面这行代码  grant all privileges on `nextcloud`  ### 这个的&#x27;&#x27;内容为刚才创建的数据库名。</span></span><br><span class="line"><span class="comment">#to &#x27;nextcloudadmin&#x27;@&#x27;localhost&#x27; ###第一个&#x27;&#x27;为数据库账号，@后面的&#x27;&#x27;内容为数据库可以登录的地址，localhost意为只能本机登录。</span></span><br><span class="line"></span><br><span class="line">identified by <span class="string">&#x27;123456&#x27;</span> with grant option</span><br><span class="line"><span class="comment">#这里的&#x27;’内容为创建的账号的密码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#下面是举例</span></span><br><span class="line">grant all privileges on `cloud`.* to <span class="string">&#x27;admin&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;passwd&#x27;</span> with grant option；</span><br><span class="line"><span class="comment">#将关于cloud的所有权限 给予  admin用户</span></span><br></pre></td></tr></table></figure>
<h3 id="安装nextcloud"><a href="#安装nextcloud" class="headerlink" title="安装nextcloud"></a>安装nextcloud</h3><p>下载好的压缩包拷贝到<code>/bar/www/html/</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/www/html</span><br><span class="line"><span class="built_in">chown</span> -R  apache:apache /var/www/html <span class="comment">#给httpd服务读写权限，不执行的话，进网址会报503错误</span></span><br></pre></td></tr></table></figure>
<h1 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h1><ul>
<li>简介</li>
</ul>
<p>Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从 Apache2.0 协议开源。</p>
<p>Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。</p>
<p>容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。</p>
<p>Docker 从 17.03 版本之后分为 CE（Community Edition: 社区版） 和 EE（Enterprise Edition: 企业版），我们用社区版就可以了。</p>
<p>选择以Docker的方式来部署nextcloud是因为Docker可以跨平台上运行，可以确保执行环境的一致性，有利于应用的迁移和管理。</p>
<p>服务端部署的基本流程是：安装Docker并启动 —&gt; 运行Nextcloud容器 —&gt; 访问Web端初始化。</p>
<ul>
<li>看系统版本</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a</span><br><span class="line"></span><br><span class="line">yum update</span><br><span class="line"></span><br><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment">#设置阿里镜像</span></span><br></pre></td></tr></table></figure>
<ul>
<li>安装docker</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker</span><br></pre></td></tr></table></figure>
<ul>
<li>启动docker服务</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>
<ul>
<li>查看docker状态</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure>
<ul>
<li>设置开启自启</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure>
<ul>
<li>安装nextcloud</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8888:80 nextcloud</span><br></pre></td></tr></table></figure>
<p>启动nextcloud网盘得时候会报错，原因是docker版本与系统版本不符，执行yum update更新系统即可。</p>
<ul>
<li>执行<code>docker ps</code>查看服务运行状态</li>
</ul>
<p>安装完成后在安全组配置8888的访问策略，访问公网IP:8888即可访问。</p>
<h1 id="宝塔镜像安装"><a href="#宝塔镜像安装" class="headerlink" title="宝塔镜像安装"></a>宝塔镜像安装</h1><h2 id="centos安装宝塔"><a href="#centos安装宝塔" class="headerlink" title="centos安装宝塔"></a>centos安装宝塔</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install.sh &amp;&amp; sh install.sh</span><br><span class="line"><span class="comment"># centos7 安装宝塔界面</span></span><br></pre></td></tr></table></figure>
<p>记录账号密码和访问地址</p>
<blockquote>
<p>浏览器端无法打开检查服务器端口是否打开8888</p>
</blockquote>
<h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><p>安装插件，选择LNMP，<strong>PHP选择7.2</strong></p>
<p>建议从软件商店里安装：Nginx1,16，MySQL5.7，PHP7.2，pureftpd-1.0.47，nextcloud-16.0.11</p>
<h2 id="添加站点"><a href="#添加站点" class="headerlink" title="添加站点"></a>添加站点</h2><p>点击<code>网站</code>—&gt;<code>添加站点</code><br>设置域名+端口（没有域名就是服务器地址和端口）</p>
<p>选择数据库，记住密码</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E6%B7%BB%E5%8A%A0%E7%AB%99%E7%82%B9.png" class="" title="添加站点">
<p>这个时候应该可以直接通过公网访问网站了。</p>
<h2 id="拷贝nextcloud文件"><a href="#拷贝nextcloud文件" class="headerlink" title="拷贝nextcloud文件"></a>拷贝nextcloud文件</h2><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E6%8B%B7%E8%B4%9Dnextcloud%E6%96%87%E4%BB%B6-1.png" class="" title="拷贝nextcloud文件-1">
<p>找到根目录，把nextcloud文件拷贝到根目录(sftp)。</p>
<p>点击<code>设置</code>，选择网站运行根目录。</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E6%8B%B7%E8%B4%9Dnextcloud%E6%96%87%E4%BB%B6-2.png" class="" title="拷贝nextcloud文件-2">
<p>然后输入网站名(服务器地址)即可进行初始化设置。</p>
<blockquote>
<p>选用宝塔文件系统上传压缩包然后移动设定目录即可。</p>
</blockquote>
<h2 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h2><p>重启 Nginx ，输入域名或IP进入 Nextcloud 首次登陆配置，输入管理员账号密码，数据库管理员，数据库名，数据库密码，配置完成，自动进入nextcloud主页。</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8.png" class="" title="开始使用">
<h2 id="一些优化"><a href="#一些优化" class="headerlink" title="一些优化"></a>一些优化</h2><h3 id="安装php扩展"><a href="#安装php扩展" class="headerlink" title="安装php扩展"></a>安装php扩展</h3><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E5%AE%89%E8%A3%85php%E6%89%A9%E5%B1%95.png" class="" title="安装php扩展">
<h3 id="php设置"><a href="#php设置" class="headerlink" title="php设置"></a>php设置</h3><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/php%E8%AE%BE%E7%BD%AE.png" class="" title="php设置">
<p>首页-&gt;文件-&gt; <code>/www/server/php/72/etc</code>，编辑<code>php-fpm.conf</code> 末尾添加一行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">env</span>[PATH] = /usr/local/bin:/usr/bin:/bin:/usr/local/php/bin</span><br></pre></td></tr></table></figure>
<h1 id="使用阿里云OSS"><a href="#使用阿里云OSS" class="headerlink" title="使用阿里云OSS"></a>使用阿里云OSS</h1><p>阿里云对象存储服务（Object Storage Service，简称 OSS）为您提供基于网络的数据存取服务。使用 OSS，您可以通过网络随时存储和调用包括文本、图片、音频和视频等在内的各种非结构化数据文件。</p>
<p>阿里云 OSS 将数据文件以对象（Object）的形式上传到存储空间（Bucket）中。您可以进行以下操作：</p>
<ul>
<li>创建一个或者多个存储空间，向每个存储空间中添加一个或多个文件。</li>
<li>通过获取已上传文件的地址进行文件的分享和下载。</li>
<li>通过修改存储空间或文件的读写权限（ACL）来设置访问权限。</li>
<li>通过阿里云管理控制台、各种便捷工具以及丰富的 SDK 包执行基本和高级 OSS 操作。</li>
</ul>
<h2 id="购买oss"><a href="#购买oss" class="headerlink" title="购买oss"></a>购买oss</h2><h2 id="安装OSSFS"><a href="#安装OSSFS" class="headerlink" title="安装OSSFS"></a>安装OSSFS</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/aliyun/ossfs/releases/download/v1.80.5/ossfs_1.80.5_centos7.0_x86_64.rpm</span><br><span class="line"></span><br><span class="line">yum localinstall https://github.com/aliyun/ossfs/releases/download/v1.80.0/ossfs_1.80.0_centos7.0_x86_64.rpm</span><br><span class="line"></span><br><span class="line">yum localinstall ossfs_1.80.0_centos7.0_x86_64.rpm</span><br><span class="line"></span><br><span class="line">yum install ossfs</span><br></pre></td></tr></table></figure>
<h2 id="获取-AccessKeyId-Secret"><a href="#获取-AccessKeyId-Secret" class="headerlink" title="获取 AccessKeyId/Secret"></a>获取 AccessKeyId/Secret</h2><p>登录阿里云控制台。单击页面左上方的管理控制台。将鼠标移至右上方的“账号管理”图标选择accessKeys,然后创建key。</p>
<blockquote>
<p>提示信息中的云账号AccessKey是您访问阿里云API的密钥，具有该账户完全的权限，请务必妥善保管。请勿通过任何方式（如Github等）将AccessKey公开至外部渠道，以免被恶意利用而造成安全威胁。强烈建议您遵循阿里云安全最佳实践，使用RAM子用户AccessKey来进行API调用。</p>
</blockquote>
<h2 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h2><p>设置<code>bucket name</code>（购买后创建的bucket名称） 和 <code>AccessKeyId/Secret</code>信息，将其存放在<code>/etc/passwd-ossfs</code> 文件中，注意这个文件的权限必须正确设置，建议设为<code>640</code>。</p>
<h3 id="存储密令"><a href="#存储密令" class="headerlink" title="存储密令"></a>存储密令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> my-bucket:my-access-key-id:my-access-key-secret &gt; /etc/passwd-ossfs</span><br><span class="line"><span class="built_in">chmod</span> 640 /etc/passwd-ossfs</span><br></pre></td></tr></table></figure>
<h3 id="将oss-bucket挂载到指定目录"><a href="#将oss-bucket挂载到指定目录" class="headerlink" title="将oss bucket挂载到指定目录"></a>将oss bucket挂载到指定目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ossfs my-bucket my-mount-point -ourl=my-oss-endpoint</span><br></pre></td></tr></table></figure>
<p><code>oss endpoint</code>地址可以在OSS控制台找到一定要选择内网地址。</p>
<ul>
<li>示例</li>
</ul>
<p>将<code>my-bucket</code>这个bucket挂载到<code>/tmp/ossfs</code>目录下，<code>AccessKeyId</code>是<code>abcde</code>，<code>AccessKeySecret</code>是<code>123456</code>，<code>oss endpoint</code>是<code>oss-cn-hongkong-internal.aliyuncs.com</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> my-bucket:abcde:123456 &gt; /etc/passwd-ossfs</span><br><span class="line"><span class="built_in">chmod</span> 640 /etc/passwd-ossfs</span><br><span class="line"><span class="built_in">mkdir</span> /tmp/ossfs</span><br><span class="line">ossfs my-bucket /tmp/ossfs -ourl=http://oss-cn-hongkong-internal.aliyuncs.com -o allow_other</span><br></pre></td></tr></table></figure>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E6%8C%82%E8%BD%BD%E6%88%90%E5%8A%9F.png" class="" title="挂载成功">
<h3 id="使挂载的文件夹-tmp-ossfs-属于某个user"><a href="#使挂载的文件夹-tmp-ossfs-属于某个user" class="headerlink" title="使挂载的文件夹(/tmp/ossfs)属于某个user"></a>使挂载的文件夹(/tmp/ossfs)属于某个user</h3><h4 id="查看apache用户的uid和gid"><a href="#查看apache用户的uid和gid" class="headerlink" title="查看apache用户的uid和gid"></a>查看apache用户的uid和gid</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Cat /etc/passwd</span><br><span class="line">Cat /etc/group</span><br></pre></td></tr></table></figure>
<h4 id="使用上面查找到的uid和gid挂载OSS存储"><a href="#使用上面查找到的uid和gid挂载OSS存储" class="headerlink" title="使用上面查找到的uid和gid挂载OSS存储"></a>使用上面查找到的uid和gid挂载OSS存储</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ossfs xmnetchina1 /tmp/ossfs -ourl=oss-cn-qingdao-internal.aliyuncs.com -ouid=1000 -ogid=1000 -oumask=007 -o allow_other</span><br><span class="line"><span class="comment"># xmnetchina1：oss的bucket域名</span></span><br><span class="line"><span class="comment"># /tmp/ossfs：挂载目录</span></span><br><span class="line"><span class="comment"># oss-cn-qingdao-internal.aliyuncs.com：OSS的地址（这边使用内网访问internal）</span></span><br><span class="line"><span class="comment"># -ouid=1000：apache用户的uid</span></span><br><span class="line"><span class="comment"># -ogid=1000：apache组的gid</span></span><br><span class="line"><span class="comment"># 使用nginx搭建的时候注意查找的用户为nginx</span></span><br></pre></td></tr></table></figure>
<h3 id="查看挂载情况"><a href="#查看挂载情况" class="headerlink" title="查看挂载情况"></a>查看挂载情况</h3><p><code>df -h</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">devtmpfs        910M     0  910M   0% /dev</span><br><span class="line">tmpfs           920M     0  920M   0% /dev/shm</span><br><span class="line">tmpfs           920M  8.4M  912M   1% /run</span><br><span class="line">tmpfs           920M     0  920M   0% /sys/fs/cgroup</span><br><span class="line">/dev/vda1        40G  3.2G   35G   9% /</span><br><span class="line">tmpfs           184M     0  184M   0% /run/user/0</span><br><span class="line">ossfs           256T     0  256T   0% /tmp/ossfs</span><br></pre></td></tr></table></figure>
<h3 id="设置开机自动挂载"><a href="#设置开机自动挂载" class="headerlink" title="设置开机自动挂载"></a>设置开机自动挂载</h3><p>通过开机自启动脚本mount（适用于centos7.0及以上的系统）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ! /bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ossfs      Automount Aliyun OSS Bucket in the specified direcotry.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># chkconfig: 2345 90 10</span></span><br><span class="line"><span class="comment"># description: Activates/Deactivates ossfs configured to start at boot time.</span></span><br><span class="line"> </span><br><span class="line">ossfs your_bucket your_mountpoint -ourl=your_url -oallow_other</span><br></pre></td></tr></table></figure>
<ul>
<li>在<code>/etc/init.d/</code>目录下建立文件ossfs，把模板文件中的内容拷贝到这个新文件中。并将其中的<code>your_xxx</code>内容改成您自己的信息。</li>
<li>执行命令：<code>chmod a+x /etc/init.d/ossfs</code></li>
<li>上述命令是把新建立的ossfs脚本赋予可执行权限。您可以执行该脚本，如果脚本文件内容无误，那么此时oss中的bucket已经挂载到您指定的目录下了。</li>
<li>执行命令：<code>chkconfig ossfs on</code></li>
<li>上述命令是把ossfs启动脚本作为其他服务，开机自动启动。</li>
</ul>
<h3 id="nextcloud设置开启挂载"><a href="#nextcloud设置开启挂载" class="headerlink" title="nextcloud设置开启挂载"></a>nextcloud设置开启挂载</h3><h4 id="右上角点击应用，启用External-storage-support"><a href="#右上角点击应用，启用External-storage-support" class="headerlink" title="右上角点击应用，启用External storage support"></a>右上角点击应用，启用<code>External storage support</code></h4><h4 id="进入外部存储会发现提示：“smbclient”-未安装。无法挂载-“SMB-CIFS”-“SMB-CIFS-使用-OC-登录信息”。请联系管理员安装。需要进入SSH安装smbclient。"><a href="#进入外部存储会发现提示：“smbclient”-未安装。无法挂载-“SMB-CIFS”-“SMB-CIFS-使用-OC-登录信息”。请联系管理员安装。需要进入SSH安装smbclient。" class="headerlink" title="进入外部存储会发现提示：“smbclient” 未安装。无法挂载 “SMB / CIFS”, “SMB / CIFS 使用 OC 登录信息”。请联系管理员安装。需要进入SSH安装smbclient。"></a>进入外部存储会发现提示：“smbclient” 未安装。无法挂载 “SMB / CIFS”, “SMB / CIFS 使用 OC 登录信息”。请联系管理员安装。需要进入SSH安装smbclient。</h4><p>注意：安装之前进入宝塔面板→php管理→禁用函数里面把“exec”“popen”“putenv”删除不然会安装不上<br>检查php的配置文件，看是否已添加引用smbclient的库文件，如未添加，需手动添加并重启php。</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E6%A3%80%E6%9F%A5php%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png" class="" title="检查php的配置文件">
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install libsmbclient libsmbclient-devel</span><br><span class="line">yum install php-devel php-pear httpd-devel</span><br><span class="line">pecl install smbclient</span><br><span class="line">pecl channel-update pecl.php.net</span><br></pre></td></tr></table></figure>
<p>重启php服务</p>
<p>再到设置里外部储存选择<code>本地</code>，地点为<code>/tmp/ossfs</code></p>
<h3 id="您的数据目录和文件可能可以从互联网访问。-htaccess-文件不工作。强烈建议您配置您的-web-服务器，使数据目录不再可访问，或将数据目录移到-web-服务器文档根目录之外。"><a href="#您的数据目录和文件可能可以从互联网访问。-htaccess-文件不工作。强烈建议您配置您的-web-服务器，使数据目录不再可访问，或将数据目录移到-web-服务器文档根目录之外。" class="headerlink" title="您的数据目录和文件可能可以从互联网访问。.htaccess 文件不工作。强烈建议您配置您的 web 服务器，使数据目录不再可访问，或将数据目录移到 web 服务器文档根目录之外。"></a>您的数据目录和文件可能可以从互联网访问。.htaccess 文件不工作。强烈建议您配置您的 web 服务器，使数据目录不再可访问，或将数据目录移到 web 服务器文档根目录之外。</h3><p>打开宝塔界面选择 网站 设置 配置文件 中加入如下代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/</span><br><span class="line">&#123;</span><br><span class="line">  deny all;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="PHP的安装似乎不正确，无法访问系统环境变量。getenv-“PATH”-函数测试返回了一个空值。-请参照安装说明文档中的PHP配置说明查阅您服务器的PHP配置信息，特别是在使用php-fpm时。"><a href="#PHP的安装似乎不正确，无法访问系统环境变量。getenv-“PATH”-函数测试返回了一个空值。-请参照安装说明文档中的PHP配置说明查阅您服务器的PHP配置信息，特别是在使用php-fpm时。" class="headerlink" title="PHP的安装似乎不正确，无法访问系统环境变量。getenv(“PATH”)函数测试返回了一个空值。 请参照安装说明文档中的PHP配置说明查阅您服务器的PHP配置信息，特别是在使用php-fpm时。"></a>PHP的安装似乎不正确，无法访问系统环境变量。getenv(“PATH”)函数测试返回了一个空值。 请参照安装说明文档中的PHP配置说明查阅您服务器的PHP配置信息，特别是在使用php-fpm时。</h3><p>从宝塔文件管理，打开/www/server/php/72/etc/php-fpm.conf，在其尾部添加一行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env[PATH] = /usr/local/bin:/usr/bin:/bin:/usr/local/php/bin</span><br></pre></td></tr></table></figure>
<p>重启php</p>
<h3 id="PHP-configuration-option-output-buffering-must-be-disabled"><a href="#PHP-configuration-option-output-buffering-must-be-disabled" class="headerlink" title="PHP configuration option output_buffering must be disabled"></a>PHP configuration option output_buffering must be disabled</h3><p>其实这个很好解决，PHP默认是有4096字节缓冲的。但是Nextcloud希望你关闭。如果你是自己安装的PHP，在你安装PHP的路径下，打开PHP配置文件（php.ini），</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">output_buffering = 4096</span><br><span class="line">注释掉，前边加;</span><br></pre></td></tr></table></figure>
<p>重启php</p>
<h3 id="您的网页服务器未正确设置以解析“-well-known-webfinger”"><a href="#您的网页服务器未正确设置以解析“-well-known-webfinger”" class="headerlink" title="您的网页服务器未正确设置以解析“/.well-known/webfinger”"></a>您的网页服务器未正确设置以解析“/.well-known/webfinger”</h3><p>网站 &gt; 域名 &gt; 设置 &gt; 伪静态</p>
<p>加入如下代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">location = /.well-known/webfinger &#123;</span><br><span class="line">     return 301 $scheme://$host:$server_port/index.php/.well-known/webfinger;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">location = /.well-known/nodeinfo &#123;</span><br><span class="line">    return 301 $scheme://$host:$server_port/index.php/.well-known/nodeinfo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location = /.well-known/carddav &#123;</span><br><span class="line">	return 301 $scheme://$host/remote.php/dav;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location = /.well-known/caldav &#123;</span><br><span class="line">	return 301 $scheme://$host/remote.php/dav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="网盘使用演示"><a href="#网盘使用演示" class="headerlink" title="网盘使用演示"></a>网盘使用演示</h1><h2 id="浏览器端"><a href="#浏览器端" class="headerlink" title="浏览器端"></a>浏览器端</h2><h3 id="输入服务器地址"><a href="#输入服务器地址" class="headerlink" title="输入服务器地址"></a>输入服务器地址</h3><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA-3.png" class="" title="网盘使用演示-3">
<h3 id="输入分配用户名密码"><a href="#输入分配用户名密码" class="headerlink" title="输入分配用户名密码"></a>输入分配用户名密码</h3><h3 id="设置语言"><a href="#设置语言" class="headerlink" title="设置语言"></a>设置语言</h3><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA-4.png" class="" title="网盘使用演示-4">
<p>找到<code>Language</code>选项选择<code>简体中文</code></p>
<h2 id="win端"><a href="#win端" class="headerlink" title="win端"></a>win端</h2><p>先在浏览器登录用户。</p>
<h3 id="下载windows版本进行本地安装"><a href="#下载windows版本进行本地安装" class="headerlink" title="下载windows版本进行本地安装"></a>下载windows版本进行本地安装</h3><p><a target="_blank" rel="noopener" href="https://nextcloud.com/install/#install-clients">下载客户端</a></p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA-1.png" class="" title="网盘使用演示-1">
<h2 id="点击登录，输入服务器地址"><a href="#点击登录，输入服务器地址" class="headerlink" title="点击登录，输入服务器地址"></a>点击登录，输入服务器地址</h2><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA-2.png" class="" title="网盘使用演示-2">
<p>会自动打开浏览器，点击同意下一步。</p>
<h2 id="windows登录"><a href="#windows登录" class="headerlink" title="windows登录"></a>windows登录</h2><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA-5.png" class="" title="网盘使用演示-5">
<p>点击网页弹出链接</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA-6.png" class="" title="网盘使用演示-6">
<p>win端和服务器端将保持同步，后台开启Nextcloud应用即可。</p>
<h2 id="android端"><a href="#android端" class="headerlink" title="android端"></a>android端</h2><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E7%BD%91%E7%9B%98%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA-android%E7%AB%AF.png" class="" title="网盘使用演示-android端">
<p>其他系统类似，都可以同步使用。</p>
<h1 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h1><h2 id="痛点"><a href="#痛点" class="headerlink" title="痛点"></a>痛点</h2><p>实验室三人，共用一个用户名密码。<br>吴老师和学生小代、小孟。</p>
<p>小孟小代负责整理项目文档(约40G)，用普通文件传输效率低下，速度较慢。学生与老师之间协作困难。</p>
<h2 id="使用解决方案"><a href="#使用解决方案" class="headerlink" title="使用解决方案"></a>使用解决方案</h2><p>创建三个账号wu、dai、meng代表三个人，归位一个小组swpu，dai为小组管理员。</p>
<img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E4%BD%BF%E7%94%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.png" class="" title="使用解决方案">
<p>dai创建文件夹<code>团队共享目录</code>，给wu和meng编辑修改删除权限，三人可以共同修改一个文件目录。</p>
<p>meng登录网盘，设置同步文件夹，将项目原始文档拖入<code>团队共享目录</code>，并点击上传。所有项目文档归档到云盘。<br>dai登录网盘，登录时，选择立即同步，就可以下载所有项目文档至本机。<br>wu登录网盘可以下载小孟整理过传输到网盘的大批量文件，并进行批示。</p>
<p>三人共同对一个目录进行操作，通过网络传输方式将文件同步到服务器。</p>
<h2 id="硬盘介绍"><a href="#硬盘介绍" class="headerlink" title="硬盘介绍"></a>硬盘介绍</h2><p>物理主机40G带系统，保留使用，用作个人资料。</p>
<p>OSS对象存储盘，用于传输实验室资料，弹性扩展。</p>
<h2 id="使用技巧"><a href="#使用技巧" class="headerlink" title="使用技巧"></a>使用技巧</h2><img src="/2020/07/05/%E9%98%BF%E9%87%8C%E4%BA%91%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BA%91%E7%9B%98/%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7.png" class="" title="使用技巧">
<p>1.实验室讨论，每天上传一次文件，减少流量消耗。<br>2.平时不用的话，暂停文件夹同步。<br>3.成员之间尽量分开时间段同步文件夹。<br>4.共享文件夹里的内容不要轻易改动。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">HibisciDai</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://hibiscidai.com/2020/07/05/阿里云搭建个人云盘/">http://hibiscidai.com/2020/07/05/阿里云搭建个人云盘/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://hibiscidai.com">HibisciDai</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><a class="post-meta__tags" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%BF%87%E7%A8%8B/">博客搭建过程</a><a class="post-meta__tags" href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91/">阿里云</a></div><div class="social-share pull-right" data-disabled="linkedin,diandian"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/07/09/Hadoop%E5%9F%BA%E7%A1%80/"><i class="fa fa-chevron-left">  </i><span>Hadoop基础</span></a></div><div class="next-post pull-right"><a href="/2020/07/02/Jupyter%20Notebook-Anaconda%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/"><span>Jupyter Notebook-Anaconda环境安装</span><i class="fa fa-chevron-right"></i></a></div></nav><div class="post-adv"><a target="_blank" rel="noopener" href="https://xn--mesr8b36x.agency/#/register?code=R5RS1JHy">好用、实惠、稳定的梯子,点击这里<img src="https://hibiscidai.com/gallery/adv_1.png" width="728" height="90"></a></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'ccecdd8a44b8307064ce',
  clientSecret: '0a2f712808b434da5c06f04e17da4be2ac0d7cc5',
  repo: 'HibisciDai.github.io',
  owner: 'HibisciDai',
  admin: 'HibisciDai',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(/img/banner2.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2023 By HibisciDai</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script src="/js/search/local-search.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>